\documentclass[a4j, dvipdfmx]{jsarticle}

% 他にも必要なパッケージがアリそうならこちらから
% https://qiita.com/Yarakashi_Kikohshi/items/97f9f920fb23974e0011

\usepackage{subfiles} % プリアンブルを共有したファイル分割
\usepackage[margin=15mm]{geometry} % 細かいサイズ設定などはこれ
\usepackage{fancyhdr} % 自由度の高いヘッダ・フッタにする際に使う
% \usepackage[]{multicol} % 一部二段組みにする際に使う
\usepackage{xcolor} % 文字等に色を付ける際に使う
\usepackage{graphicx} % 画像を利用するのに使う
\usepackage{float} % 図を強制的に指定した位置に配置するときに使う(Hで指定)
\usepackage{tikz} % 複雑な図式を書く際に使う
  \usetikzlibrary{shapes.geometric}
  \usetikzlibrary{positioning}
  \usetikzlibrary{cd}
\usepackage{listings} % ソースコードの挿入 / シンタックスハイライトの付与
\usepackage{lipsum} % 文章で埋めたい際に使う
\usepackage{comment} % ブロックごとコメントアウトしたい際に使う
% https://mathlandscape.com/latex-mathcal/
\usepackage{amsmath} % 数式とか色々に使う
\usepackage{amssymb} % 数学記号全般
\usepackage{amsthm} % 証明環境に使う
  \theoremstyle{definition}
  \newtheorem{theo}{定理}
  \newtheorem{defn}[theo]{定義}
  \newtheorem{lem}[theo]{補題}
  \newtheorem{cor}[theo]{系}
  \newtheorem{prop}[theo]{命題}
  \newtheorem{exmp}[theo]{例}
  \renewcommand\proofname{\bf 証明}
\usepackage{amscd} % 可換図式を書く際に使う
\usepackage{mathtools} % 数式に番号振ったやつを参照するのに使う
\usepackage{mathrsfs} % 数式中に筆記体や花形文字など特殊なフォントを用いるときに使う
\usepackage{bussproofs} % 導出木や規則の記述に使う
  \EnableBpAbbreviations
  \newenvironment{bprooftree}
                {\leavevmode\hbox\bgroup}
                {\DisplayProof\egroup}
\usepackage{array} % array 環境と tabular 環境の拡張
\usepackage[%
 dvipdfmx,%
 bookmarks=true,%
 bookmarksdepth=3,%
 bookmarksnumbered=true,%
 colorlinks=false,%
 setpagesize=false,%
 pdftitle={},%
 pdfsubject={},%
 pdfauthor={},%
 pdfkeywords={}%
]{hyperref} % ハイパーリンクを埋め込むのに使う
\usepackage{pxjahyper} % PDFのしおり機能の日本語文字化けを防ぐ。
% \usepackage{txfonts} % Times 風のフォントを使うのによく使われるらすい
\usepackage{latexsym} % 数式で使える記号を増やす。
\usepackage[bbgreekl]{mathbbol} % アラビア数字，小文字アルファベット，大文字アルファベットのために使う
% https://gist.github.com/Yarakashi-Kikohshi/cf19ee163ff426196d7494b81339c3cf
  \DeclareSymbolFontAlphabet{\mathbb}{AMSb}
  \DeclareSymbolFontAlphabet{\mathbbl}{bbold}
  \DeclareMathSymbol{\bbepsilon}{\mathord}{bbold}{"0F}
  \DeclareMathSymbol{\fcmp}{\mathrel}{bbold}{\lq\;}
\usepackage{bm} % boldsymbolの代わりにbmコマンドを使う際に使う


\newcommand{\bnfdef}{::=}
\newcommand{\sequent}[2]{#1 \;\vdash\; #2}
\newcommand{\lnlsequent}[3]{#1 \mid #2 \;\vdash\; #3}
\newcommand{\nsequent}[3]{#1 \;\vdash\; #2 \;\triangleright\; #3}
\newcommand{\unify}{\mathop{\mathrm{unify}}\nolimits}
\newcommand{\infer}[5]{#1 \; \vdash \; #2 \; \triangleright \; #3 \; \mid \; #5}
\newcommand{\semantics}[1]{[\![ #1 ]\!]}
\newcommand{\judge}[2]{[\![ #1 \;\vdash\; #2 ]\!]}
\newcommand{\match}[3]{#1 \;\triangleright\; #2 \quad\rightharpoonup\quad #3}
\newcommand{\subst}[4]{#1 \;\triangleright\; #2 \quad\rightsquigarrow\quad #3 \;\triangleright\; #4}
\newcommand{\reduct}[2]{#1 &\;\Rrightarrow\; #2}
\newcommand{\reduction}[2]{#1 \;\Rrightarrow\; #2}
\newcommand{\equality}[4]{ #1 \;\vdash\; #2 \equiv #3 : #4}

\newcommand{\Hom}{\mathop{\mathrm{Hom}}\nolimits}
\newcommand{\Dom}{\mathop{\mathrm{Dom}}\nolimits}
\newcommand{\Cod}{\mathop{\mathrm{Cod}}\nolimits}

\pagestyle{fancy}
\fancyhf{}
\title{高階の型付き可逆プログラミング言語}
\date{}
\author{MountainSeal}
\rhead{\today}
\rfoot{\thepage}
\renewcommand{\headrulewidth}{0.5pt} % ヘッダーラインを引く
\renewcommand{\footrulewidth}{0.5pt} % フッターラインを引く
\setlength{\headheight}{28.27264pt} % 警告が鬱陶しいときに
% \setlength\parindent{0pt} % 段落初めの空白を0ptにする


\begin{document}
\maketitle
\thispagestyle{fancy}

\begin{figure}[H]
  \begin{alignat*}{3}
    a &= b & c &= d & e &= f \\
    a &= b & c &= d & e &= f
  \end{alignat*}
\end{figure}


% \begin{figure}[H]
%   \begin{center}
%     \begin{bprooftree}
%       \AxiomC{$　$}
%       \LeftLabel{$\text{Var}_\text{linear}$}
%       \UnaryInfC{$\lnlsequent{\Theta}{x:T}{x:T}$}
%     \end{bprooftree}
%     \begin{bprooftree}
%       \AxiomC{$　$}
%       \RightLabel{$\text{Var}_\text{nonlinear}$}
%       \UnaryInfC{$\lnlsequent{\Theta,x:T}{\quad}{x:T}$}
%     \end{bprooftree}
%   \end{center}
%   \begin{center}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma_2,\Gamma_1}{t:T}$}
%       \LeftLabel{$\text{Exch}_\text{linear}$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma_1,\Gamma_2}{t:T}$}
%     \end{bprooftree}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta_2,\Theta_1}{\Gamma}{t:T}$}
%       \RightLabel{$\text{Exch}_\text{nonlinear}$}
%       \UnaryInfC{$\lnlsequent{\Theta_1,\Theta_2}{\Gamma}{t:T}$}
%     \end{bprooftree}
%   \end{center}
%   \begin{center}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma}{t:T}$}
%       \LeftLabel{$I_L$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma,\text{()}:I}{t:T}$}
%     \end{bprooftree}
%     \begin{bprooftree}
%       \AxiomC{$　$}
%       \RightLabel{$I_R$}
%       \UnaryInfC{$\lnlsequent{\Theta}{}{\text{()}:I}$}
%     \end{bprooftree}
%   \end{center}
%   \begin{center}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma,t_1:T_1}{t:T}$}
%       \LeftLabel{$\oplus_{L_l}$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma,\text{inl}\;t_1:T_1\oplus{}T_2}{t:T}$}
%     \end{bprooftree}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma}{t_1:T_1}$}
%       \RightLabel{$\oplus_{R_l}$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma}{\text{inl}\;t_1:T_1\oplus{}T_2}$}
%     \end{bprooftree}
%   \end{center}
%   \begin{center}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma,t_2:T_2}{t:T}$}
%       \LeftLabel{$\oplus_{L_r}$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma,\text{inr}\;t_2:T_1\oplus{}T_2}{t:T}$}
%     \end{bprooftree}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma}{t_2:T_2}$}
%       \RightLabel{$\oplus_{R_r}$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma}{\text{inr}\;t_2:T_1\oplus{}T_2}$}
%     \end{bprooftree}
%   \end{center}
%   \begin{center}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma,t_1:T_1,t_2:T_2}{t:T}$}
%       \LeftLabel{$\otimes_L$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma,t_1\times{}t_2:T_1\otimes{}T_2}{t:T}$}
%     \end{bprooftree}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma_1}{t_1:T_1}$}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma_2}{t_2:T_2}$}
%       \RightLabel{$\otimes_R$}
%       \BinaryInfC{$\lnlsequent{\Theta}{\Gamma_1,\Gamma_2}{t_1\times{}t_2:T_1\otimes{}T_2}$}
%     \end{bprooftree}
%   \end{center}
%   \begin{center}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma_1}{t_1:T_1}$}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma_2,t_2:T_2}{t:T}$}
%       \LeftLabel{$\multimap_L$}
%       \BinaryInfC{$\lnlsequent{\Theta}{\Gamma_1,\Gamma_2,t_1\mapsto{}t_2:T_1\multimap{}T_2}{t:T}$}
%     \end{bprooftree}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma,t_1:T_1}{t_2:T_2}$}
%       \RightLabel{$\multimap_R$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma}{t_1\mapsto{}t_2:T_1\multimap{}T_2}$}
%     \end{bprooftree}
%   \end{center}
%   \begin{center}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma,u:[X \rightarrow \mu{X}.U]U}{t:T}$}
%       \LeftLabel{$\mu_L$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma,\text{fold}_{\mu{X}.U}\;u:\mu{X}.U}{t:T}$}
%     \end{bprooftree}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma}{t:[X \rightarrow \mu{X}.T]T}$}
%       \RightLabel{$\mu_R$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma}{\text{fold}_{\mu{X}.T}\;t:\mu{X}.T}$}
%     \end{bprooftree}
%   \end{center}
%   \begin{center}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma,u:S\oplus{}U_1\multimap{}S\oplus{}U_2}{t:T}$}
%       \LeftLabel{$\text{Trace}_L$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma,\text{trace}_S\;u:U_1\multimap{}U_2}{t:T}$}
%     \end{bprooftree}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma}{t:U\oplus{}T_1\multimap{}U\oplus{}T_2}$}
%       \RightLabel{$\text{Trace}_R$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma}{\text{trace}_U\;t:T_1\multimap{}T_2}$}
%     \end{bprooftree}
%   \end{center}
%   \begin{center}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma,t_1:U}{t:T}$}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma,t_2:U}{t:T}$}
%       \LeftLabel{$\text{Par}_L$}
%       \BinaryInfC{$\lnlsequent{\Theta}{\Gamma,t_1\parallel{}t_2:U}{t:T}$}
%     \end{bprooftree}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma}{t_1:T}$}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma}{t_2:T}$}
%       \RightLabel{$\text{Par}_R$}
%       \BinaryInfC{$\lnlsequent{\Theta}{\Gamma}{t_1\parallel{}t_2:T}$}
%     \end{bprooftree}
%   \end{center}
%   \begin{center}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma,t_1:T_1\multimap{}T_2,t_2:T_2\multimap{}T_3}{t:T}$}
%       \LeftLabel{$\text{Seq}_L$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma,t_1\fcmp{}t_2:T_1\multimap{}T_3}{t:T}$}
%     \end{bprooftree}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma_1}{t_1:T_1\multimap{}T_2}$}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma_2}{t_2:T_2\multimap{}T_3}$}
%       \RightLabel{$\text{Seq}_R$}
%       \BinaryInfC{$\lnlsequent{\Theta}{\Gamma_1,\Gamma_2}{t_1\fcmp{}t_2:T_1\multimap{}T_3}$}
%     \end{bprooftree}
%   \end{center}
%   \begin{center}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma,u:T_2\multimap{}T_1}{t:T}$}
%       \LeftLabel{$\dagger_L$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma,u^\dagger:T_1\multimap{}T_2}{t:T}$}
%     \end{bprooftree}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma}{t:T_2\multimap{}T_1}$}
%       \RightLabel{$\dagger_R$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma}{t^\dagger:T_1\multimap{}T_2}$}
%     \end{bprooftree}
%   \end{center}
%   \begin{center}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma}{t:T}$}
%       \LeftLabel{$\text{id}_L$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma,\text{id}:U\multimap{}U}{t:T}$}
%     \end{bprooftree}
%     \begin{bprooftree}
%       \AxiomC{$　$}
%       \RightLabel{$\text{id}_R$}
%       \UnaryInfC{$\lnlsequent{\Theta}{}{\text{id}:T\multimap{}T}$}
%     \end{bprooftree}
%   \end{center}
%   \begin{center}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma}{t:T}$}
%       \LeftLabel{$\varnothing_\text{L}$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma,\varnothing:U}{t:T}$}
%     \end{bprooftree}
%     \begin{bprooftree}
%       \AxiomC{$　$}
%       \RightLabel{$\varnothing_\text{R}$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma}{\varnothing:T}$}
%     \end{bprooftree}
%   \end{center}
%   \begin{center}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta,u:U}{\Gamma}{t:T}$}
%       \LeftLabel{$!_L$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma,\text{lift}\;u:!U}{t:T}$}
%     \end{bprooftree}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{\Theta}{\Gamma}{t:T}$}
%       \RightLabel{$!_R$}
%       \UnaryInfC{$\lnlsequent{\Theta}{\Gamma}{\text{lift}\;t:!T}$}
%     \end{bprooftree}
%   \end{center}
%   \begin{center}
%     \begin{bprooftree}
%       \AxiomC{$\lnlsequent{}{}{f:T_1\multimap{}T_2}$}
%       \AxiomC{$\lnlsequent{}{}{e:T_1}$}
%       \RightLabel{$\text{App}$}
%       \BinaryInfC{$\lnlsequent{}{}{f\;\text{@}\;e:T_2}$}
%     \end{bprooftree}
%   \end{center}
%   \caption{Typing rules}
%   \label{fig:ty_judge}
% \end{figure}
% \newpage

\section{構文}

\begin{figure}[H]
  \begin{alignat*}{3}
    &\text{Type Variable} & \quad\ni & \quad X,Y,Z \quad         &              & \\
    &\text{Term Variable} & \quad\ni & \quad x,y,z \quad         &              & \\
    &\text{Type}          & \quad\ni & \quad S,T,U \quad         & \bnfdef\quad & X \mid \mathrm{I} \mid T\oplus{}T \mid T\otimes{}T \mid T\multimap{}T \mid \mu{X}.T \\
    &\text{Value}         & \quad\ni & \quad v,w   \quad         & \bnfdef\quad & x \mid \text{()} \mid \text{inl}\;v \mid \text{inr}\;v \mid v\times{}v \mid v\mapsto{}v \mid \text{fold}_T\;v \mid \text{trace}_T\;v \mid v\parallel{}v \mid v\fcmp{}v \mid \varnothing \mid \text{id} \\
    &\text{Term}          & \ni      & \quad s,t,u \quad         & \bnfdef\quad & x \mid \text{()} \mid \text{inl}\;t \mid \text{inr}\;t \mid t\times{}t \mid t\mapsto{}t \mid \text{fold}_T\;t \mid \text{trace}_T\;t \mid t\parallel{}t \mid t\fcmp{}t \mid \varnothing \mid \text{id} \mid t^\dagger \\
    &\text{Expr}          & \ni      & \quad e,f,g \quad         & \bnfdef\quad & t \mid e\;\text{@}\;e \\
    &\text{Type Context}  & \quad\ni & \quad \Theta \quad & \bnfdef\quad & \; \mid \Theta,X \\
    &\text{Term Context}  & \quad\ni & \quad \Gamma \quad & \bnfdef\quad & \; \mid \Gamma,t:T \\
    &\text{Type Judgement}& \quad\ni & \quad \sequent{\Theta}{T} \quad   & & \\
    &\text{Term Judgement}& \quad\ni & \quad \sequent{\Gamma}{t:T} \quad & & \\
    &\text{Expr Judgement}& \quad\ni & \quad \sequent{\quad}{e:T} \quad & & \\
    &\text{Reduction}     & \quad\ni & \quad \reduction{t}{t} \quad & &
  \end{alignat*}
  \caption{Syntax}
  \label{fig:syntax}
\end{figure}

\section{型の構成}

\begin{figure}[H]
  \small
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\text{　}$}
      \UnaryInfC{$\sequent{\Theta,X}{X}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\text{　}$}
      \UnaryInfC{$\sequent{\Theta}{I}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Theta}{T_1}$}
      \AxiomC{$\sequent{\Theta}{T_2}$}
      \BinaryInfC{$\sequent{\Theta}{T_1\oplus{}T_2}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Theta}{T_1}$}
      \AxiomC{$\sequent{\Theta}{T_2}$}
      \BinaryInfC{$\sequent{\Theta}{T_1\otimes{}T_2}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Theta}{T_1}$}
      \AxiomC{$\sequent{\Theta}{T_2}$}
      \BinaryInfC{$\sequent{\Theta}{T_1\multimap{}T_2}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Theta,X}{T}$}
      \UnaryInfC{$\sequent{\Theta}{\mu{X}.T}$}
    \end{bprooftree}
  \end{center}
  \caption{Formation rules}
  \label{fig:ty_form}
\end{figure}

\begin{figure}[H]
  \begin{alignat*}{2}
    [\quad]&(X)                         \;&=\; &X \\
    [\sigma,X \rightarrow T]&(X)        \;&=\; &T \\
    [\sigma,X^\prime \rightarrow S]&(X) \;&=\; &X \\
    [\sigma]&(\mathrm{I})               \;&=\; &\mathrm{I} \\
    [\sigma]&(T_1\oplus T_2)            \;&=\; &[\sigma](T_1)\oplus[\sigma](T_2) \\
    [\sigma]&(T_1\otimes T_2)           \;&=\; &[\sigma](T_1)\otimes[\sigma](T_2) \\
    [\sigma]&(T_1\multimap T_2)         \;&=\; &[\sigma](T_1)\multimap[\sigma](T_2) \\
    [\sigma]&(\mu{X}.T)                 \;&=\; &\mu{X}.[\sigma](T)
  \end{alignat*}
  \caption{Type Substitution}
  \label{fig:ty_sub}
\end{figure}

\newpage

\section{Preliminary}
\subfile{preliminary}
\newpage

\section{型検査}

\begin{figure}[H]
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$　$}
      \LeftLabel{Variable}
      \UnaryInfC{$\sequent{x:T}{x:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma_2,\Gamma_1}{t:T}$}
      \RightLabel{Exchange}
      \UnaryInfC{$\sequent{\Gamma_1,\Gamma_2}{t:T}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t:T}$}
      \LeftLabel{$I_L$}
      \UnaryInfC{$\sequent{\Gamma,\text{()}:I}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$I_R$}
      \UnaryInfC{$\sequent{}{\text{()}:I}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,t_1:T_1}{t:T}$}
      \LeftLabel{$\oplus_{L_l}$}
      \UnaryInfC{$\sequent{\Gamma,\text{inl}\;t_1:T_1\oplus{}T_2}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t_1:T_1}$}
      \RightLabel{$\oplus_{R_l}$}
      \UnaryInfC{$\sequent{\Gamma}{\text{inl}\;t_1:T_1\oplus{}T_2}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,t_2:T_2}{t:T}$}
      \LeftLabel{$\oplus_{L_r}$}
      \UnaryInfC{$\sequent{\Gamma,\text{inr}\;t_2:T_1\oplus{}T_2}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t_2:T_2}$}
      \RightLabel{$\oplus_{R_r}$}
      \UnaryInfC{$\sequent{\Gamma}{\text{inr}\;t_2:T_1\oplus{}T_2}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,t_1:T_1,t_2:T_2}{t:T}$}
      \LeftLabel{$\otimes_L$}
      \UnaryInfC{$\sequent{\Gamma,t_1\times{}t_2:T_1\otimes{}T_2}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma_1}{t_1:T_1}$}
      \AxiomC{$\sequent{\Gamma_2}{t_2:T_2}$}
      \RightLabel{$\otimes_R$}
      \BinaryInfC{$\sequent{\Gamma_1,\Gamma_2}{t_1\times{}t_2:T_1\otimes{}T_2}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma_1}{t_1:T_1}$}
      \AxiomC{$\sequent{\Gamma_2,t_2:T_2}{t:T}$}
      \LeftLabel{$\multimap_L$}
      \BinaryInfC{$\sequent{\Gamma_1,\Gamma_2,t_1\mapsto{}t_2:T_1\multimap{}T_2}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,t_1:T_1}{t_2:T_2}$}
      \RightLabel{$\multimap_R$}
      \UnaryInfC{$\sequent{\Gamma}{t_1\mapsto{}t_2:T_1\multimap{}T_2}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,u:[X \rightarrow \mu{X}.U]U}{t:T}$}
      \LeftLabel{$\mu_L$}
      \UnaryInfC{$\sequent{\Gamma,\text{fold}_{\mu{X}.U}\;u:\mu{X}.U}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t:[X \rightarrow \mu{X}.T]T}$}
      \RightLabel{$\mu_R$}
      \UnaryInfC{$\sequent{\Gamma}{\text{fold}_{\mu{X}.T}\;t:\mu{X}.T}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,u:S\oplus{}U_1\multimap{}S\oplus{}U_2}{t:T}$}
      \LeftLabel{$\text{Trace}_L$}
      \UnaryInfC{$\sequent{\Gamma,\text{trace}_S\;u:U_1\multimap{}U_2}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t:U\oplus{}T_1\multimap{}U\oplus{}T_2}$}
      \RightLabel{$\text{Trace}_R$}
      \UnaryInfC{$\sequent{\Gamma}{\text{trace}_U\;t:T_1\multimap{}T_2}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,t_1:U}{t:T}$}
      \AxiomC{$\sequent{\Gamma,t_2:U}{t:T}$}
      \LeftLabel{$\text{Par}_L$}
      \BinaryInfC{$\sequent{\Gamma,t_1\parallel{}t_2:U}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t_1:T}$}
      \AxiomC{$\sequent{\Gamma}{t_2:T}$}
      \RightLabel{$\text{Par}_R$}
      \BinaryInfC{$\sequent{\Gamma}{t_1\parallel{}t_2:T}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,t_1:T_1\multimap{}T_2,t_2:T_2\multimap{}T_3}{t:T}$}
      \LeftLabel{$\text{Seq}_L$}
      \UnaryInfC{$\sequent{\Gamma,t_1\fcmp{}t_2:T_1\multimap{}T_3}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma_1}{t_1:T_1\multimap{}T_2}$}
      \AxiomC{$\sequent{\Gamma_2}{t_2:T_2\multimap{}T_3}$}
      \RightLabel{$\text{Seq}_R$}
      \BinaryInfC{$\sequent{\Gamma_1,\Gamma_2}{t_1\fcmp{}t_2:T_1\multimap{}T_3}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,u:T_2\multimap{}T_1}{t:T}$}
      \LeftLabel{$\dagger_L$}
      \UnaryInfC{$\sequent{\Gamma,u^\dagger:T_1\multimap{}T_2}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t:T_2\multimap{}T_1}$}
      \RightLabel{$\dagger_R$}
      \UnaryInfC{$\sequent{\Gamma}{t^\dagger:T_1\multimap{}T_2}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t:T}$}
      \LeftLabel{$\text{id}_L$}
      \UnaryInfC{$\sequent{\Gamma,\text{id}:U\multimap{}U}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$\text{id}_R$}
      \UnaryInfC{$\sequent{}{\text{id}:T\multimap{}T}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t:T}$}
      \LeftLabel{$\varnothing_\text{L}$}
      \UnaryInfC{$\sequent{\Gamma,\varnothing:U}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$\varnothing_\text{R}$}
      \UnaryInfC{$\sequent{\Gamma}{\varnothing:T}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    % \begin{bprooftree}
    %   \AxiomC{$\sequent{\Gamma,u:U_1\multimap{}U_2,u_1:U_1}{t:T_1\multimap{}T_2}$}
    %   \LeftLabel{$\text{App}_L$}
    %   \UnaryInfC{$\sequent{\Gamma,u\;\text{@}\;u_1:U_2}{t:T}$}
    % \end{bprooftree}
    % \begin{bprooftree}
    %   \AxiomC{$\sequent{\Gamma_1}{t:T_1\multimap{}T_2}$}
    %   \AxiomC{$\sequent{\Gamma_2}{t_1:T_1}$}
    %   \RightLabel{$\text{App}_R$}
    %   \BinaryInfC{$\sequent{\Gamma_1,\Gamma_2}{t\;\text{@}\;t_1:T_2}$}
    % \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{}{f:T_1\multimap{}T_2}$}
      \AxiomC{$\sequent{}{e:T_1}$}
      \RightLabel{$\text{App}$}
      \BinaryInfC{$\sequent{}{f\;\text{@}\;e:T_2}$}
    \end{bprooftree}
  \end{center}
  \caption{Typing rules}
  \label{fig:ty_judge}
\end{figure}

\begin{figure}[H]
  \begin{center}
    $\nsequent{}{t:T}{}$
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\Gamma(x)=T$}
      \LeftLabel{Variable}
      \UnaryInfC{$\nsequent{\Gamma}{x:T}{\Gamma\setminus x}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t:T}{\Gamma'}$}
      \LeftLabel{$I_L$}
      \UnaryInfC{$\nsequent{\Gamma,\text{()}:I}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$I_R$}
      \UnaryInfC{$\nsequent{\Gamma}{\text{()}:I}{\Gamma}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,t_1:T_1}{t:T}{\Gamma'}$}
      \LeftLabel{$\oplus_{L_l}$}
      \UnaryInfC{$\nsequent{\Gamma,\text{inl}\;t_1:T_1\oplus{}T_2}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t_1:T_1}{\Gamma'}$}
      \RightLabel{$\oplus_{R_l}$}
      \UnaryInfC{$\nsequent{\Gamma}{\text{inl}\;t_1:T_1\oplus{}T_2}{\Gamma'}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,t_2:T_2}{t:T}{\Gamma'}$}
      \LeftLabel{$\oplus_{L_r}$}
      \UnaryInfC{$\nsequent{\Gamma,\text{inr}\;t_2:T_1\oplus{}T_2}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t_2:T_2}{\Gamma'}$}
      \RightLabel{$\oplus_{R_r}$}
      \UnaryInfC{$\nsequent{\Gamma}{\text{inr}\;t_2:T_1\oplus{}T_2}{\Gamma'}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,t_1:T_1,t_2:T_2}{t:T}{\Gamma'}$}
      \LeftLabel{$\otimes_L$}
      \UnaryInfC{$\nsequent{\Gamma,t_1\times{}t_2:T_1\otimes{}T_2}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t_1:T_1}{\Gamma'}$}
      \AxiomC{$\nsequent{\Gamma'}{t_2:T_2}{\Gamma''}$}
      \RightLabel{$\otimes_R$}
      \BinaryInfC{$\nsequent{\Gamma}{t_1\times{}t_2:T_1\otimes{}T_2}{\Gamma''}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t_1:T_1}{\Gamma'}$}
      \AxiomC{$\nsequent{\Gamma',t_2:T_2}{t:T}{\Gamma''}$}
      \LeftLabel{$\multimap_L$}
      \BinaryInfC{$\nsequent{\Gamma,t_1\mapsto{}t_2:T_1\multimap{}T_2}{t:T}{\Gamma''}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,t_1:T_1}{t_2:T_2}{\Gamma'}$}
      \RightLabel{$\multimap_R$}
      \UnaryInfC{$\nsequent{\Gamma}{t_1\mapsto{}t_2:T_1\multimap{}T_2}{\Gamma'}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,u:[X \rightarrow \mu{X}.U]U}{t:T}{\Gamma'}$}
      \LeftLabel{$\mu_L$}
      \UnaryInfC{$\nsequent{\Gamma,\text{fold}_{\mu{X}.U}\;u:\mu{X}.U}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t:[X \rightarrow \mu{X}.T]T}{\Gamma'}$}
      \RightLabel{$\mu_R$}
      \UnaryInfC{$\nsequent{\Gamma}{\text{fold}_{\mu{X}.T}\;t:\mu{X}.T}{\Gamma'}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,u:S\oplus{}U_1\multimap{}S\oplus{}U_2}{t:T}{\Gamma'}$}
      \LeftLabel{$\text{Trace}_L$}
      \UnaryInfC{$\nsequent{\Gamma,\text{trace}_S\;u:U_1\multimap{}U_2}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t:U\oplus{}T_1\multimap{}U\oplus{}T_2}{\Gamma'}$}
      \RightLabel{$\text{Trace}_R$}
      \UnaryInfC{$\nsequent{\Gamma}{\text{trace}_U\;t:T_1\multimap{}T_2}{\Gamma'}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,t_1:U}{t:T}{\Gamma'}$}
      \AxiomC{$\nsequent{\Gamma,t_2:U}{t:T}{\Gamma'}$}
      \LeftLabel{$\text{Par}_L$}
      \BinaryInfC{$\nsequent{\Gamma,t_1\parallel{}t_2:U}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t_1:T}{\Gamma'}$}
      \AxiomC{$\nsequent{\Gamma}{t_2:T}{\Gamma'}$}
      \RightLabel{$\text{Par}_R$}
      \BinaryInfC{$\nsequent{\Gamma}{t_1\parallel{}t_2:T}{\Gamma'}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,t_1:T_1\multimap{}T_2,t_2:T_2\multimap{}T_3}{t:T}{\Gamma'}$}
      \LeftLabel{$\text{Seq}_L$}
      \UnaryInfC{$\nsequent{\Gamma,t_1\fcmp{}t_2:T_1\multimap{}T_3}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t_1:T_1\multimap{}T_2}{\Gamma'}$}
      \AxiomC{$\nsequent{\Gamma'}{t_2:T_2\multimap{}T_3}{\Gamma''}$}
      \RightLabel{$\text{Seq}_R$}
      \BinaryInfC{$\nsequent{\Gamma}{t_1\fcmp{}t_2:T_1\multimap{}T_3}{\Gamma''}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,u:T_2\multimap{}T_1}{t:T}{\Gamma'}$}
      \LeftLabel{$\dagger_L$}
      \UnaryInfC{$\nsequent{\Gamma,u^\dagger:T_1\multimap{}T_2}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t:T_2\multimap{}T_1}{\Gamma'}$}
      \RightLabel{$\dagger_R$}
      \UnaryInfC{$\nsequent{\Gamma}{t^\dagger:T_1\multimap{}T_2}{\Gamma'}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t:T}{\Gamma'}$}
      \LeftLabel{$\text{id}_L$}
      \UnaryInfC{$\nsequent{\Gamma,\text{id}:U\multimap{}U}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$\text{id}_R$}
      \UnaryInfC{$\nsequent{\Gamma}{\text{id}:T\multimap{}T}{\Gamma}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t:T}{\Gamma'}$}
      \LeftLabel{$\varnothing_\text{L}$}
      \UnaryInfC{$\nsequent{\Gamma,\varnothing:U}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$\varnothing_\text{R}$}
      \UnaryInfC{$\nsequent{\Gamma}{\varnothing:T}{\Gamma}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    % \begin{bprooftree}
    %   \AxiomC{$\nsequent{\Gamma,u:U_1\multimap{}U_2,u_1:U_1}{t:T}{\Gamma'}$}
    %   \LeftLabel{$\text{App}_L$}
    %   \UnaryInfC{$\nsequent{\Gamma,u\;\text{@}\;u_1:U_2}{t:T}{\Gamma'}$}
    % \end{bprooftree}
    % \begin{bprooftree}
    %   \AxiomC{$\nsequent{\Gamma}{t:T_1\multimap{}T_2}{\Gamma'}$}
    %   \AxiomC{$\nsequent{\Gamma'}{t_1:T_1}{\Gamma''}$}
    %   \RightLabel{$\text{App}_R$}
    %   \BinaryInfC{$\nsequent{\Gamma}{t\;\text{@}\;t_1:T_2}{\Gamma''}$}
    % \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{}{f:T_1\multimap{}T_2}{}$}
      \AxiomC{$\nsequent{}{e:T_1}{}$}
      \RightLabel{$\text{App}$}
      \BinaryInfC{$\nsequent{}{f\;\text{@}\;e:T_2}{}$}
    \end{bprooftree}
  \end{center}
  \caption{Syntax--Directed Typing rules}
  \label{fig:sd_ty_judge}
\end{figure}

\newpage

\section{型推論}

\begin{figure}[H]
  \begin{align*}
    \unify                                                   &:= [\text{Constraint}] \rightarrow \text{Substitution} \\
    \unify(\{\})                                             &= [] \\
    \unify(\{X = T\} \cup C)                                 &= \unify([X \rightarrow T]C) \circ [X \rightarrow T] \\
    \unify(\{T = X\} \cup C)                                 &= \unify([X \rightarrow T]C) \circ [X \rightarrow T] \\
    \unify(\{S_1 \oplus S_2 = T_1 \oplus T_2\} \cup C)       &= \unify(C \cup \{S_1 = T_1, S_2 = T_2\}) \\
    \unify(\{S_1 \otimes S_2 = T_1 \otimes T_2\} \cup C)     &= \unify(C \cup \{S_1 = T_1, S_2 = T_2\}) \\
    \unify(\{S_1 \multimap S_2 = T_1 \multimap T_2\} \cup C) &= \unify(C \cup \{S_1 = T_1, S_2 = T_2\}) \\
    \unify(\{\mu{X}.S = \mu{Y}.T\} \cup C)                   &= \unify(C \cup \{X = Y, S = T\})
  \end{align*}
  \caption{unification}
  \label{fig:unification}
\end{figure}

\begin{figure}[H]
  \begin{center}
    $\infer{}{t:X}{}{\chi}{C}$
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\Gamma(x)=V_2$}
      \LeftLabel{Variable}
      \UnaryInfC{$\infer{\Gamma}{x:V_1}{\Gamma\setminus (x:T)}{\{\}}{\{V_1=V_2\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$I_L$}
      \UnaryInfC{$\infer{\Gamma,\text{()}:V}{t:T}{\Gamma'}{\chi}{C\cup\{V=I\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$I_R$}
      \UnaryInfC{$\infer{\Gamma}{\text{()}:V}{\Gamma}{\{\}}{\{V=I\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,t_1:X_1}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\oplus_{L_l}$}
      \UnaryInfC{$\infer{\Gamma,\text{inl}\;t_1:V}{t:T}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\oplus{}X_2\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t_1:X_1}{\Gamma'}{\chi}{C}$}
      \RightLabel{$\oplus_{R_l}$}
      \UnaryInfC{$\infer{\Gamma}{\text{inl}\;t_1:V}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\oplus{}X_2\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,t_2:X_2}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\oplus_{L_r}$}
      \UnaryInfC{$\infer{\Gamma,\text{inr}\;t_2:V}{t:T}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\oplus{}X_2\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t_2:X_2}{\Gamma'}{\chi}{C}$}
      \RightLabel{$\oplus_{R_r}$}
      \UnaryInfC{$\infer{\Gamma}{\text{inr}\;t_2:V}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{X_1\oplus{}X_2\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,t_1:X_1,t_2:X_2}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\otimes_L$}
      \UnaryInfC{$\infer{\Gamma,t_1\times{}t_2:V}{t:T}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\otimes{}X_2\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t_1:X_1}{\Gamma'}{\chi_1}{C_1}$}
      \AxiomC{$\infer{\Gamma'}{t_2:X_2}{\Gamma''}{\chi_2}{C_2}$}
      \RightLabel{$\otimes_R$}
      \BinaryInfC{$\infer{\Gamma}{t_1\times{}t_2:V}{\Gamma''}{\chi_1\cup\chi_2\cup\{X_1,X_2\}}{C_1\cup{}C_2\cup\{V=X_1\otimes{}X_2\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t_1:X_1}{\Gamma'}{\chi_1}{C_1}$}
      \AxiomC{$\infer{\Gamma',t_2:X_2}{t:T}{\Gamma''}{\chi_2}{C_2}$}
      \LeftLabel{$\multimap_L$}
      \BinaryInfC{$\infer{\Gamma,t_1\mapsto{}t_2:V}{t:T}{\Gamma''}{\chi_1\cup\chi_2\cup\{X_1,X_2\}}{C_1\cup{}C_2\cup\{V=X_1\multimap{}X_2\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,t_1:X_1}{t_2:X_2}{\Gamma'}{\chi}{C}$}
      \RightLabel{$\multimap_R$}
      \UnaryInfC{$\infer{\Gamma}{t_1\mapsto{}t_2:V}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\multimap{}X_2\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,u:[Y \rightarrow \mu{Y}.U]U}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\mu_L$}
      \UnaryInfC{$\infer{\Gamma,\text{fold}_{\mu{Y}.U}\;u:V}{t:T}{\Gamma'}{\chi}{C\cup\{V=\mu{Y}.U\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t:[X \rightarrow \mu{X}.T]T}{\Gamma'}{\chi}{C}$}
      \RightLabel{$\mu_R$}
      \UnaryInfC{$\infer{\Gamma}{\text{fold}_{\mu{X}.T}\;t:V}{\Gamma'}{\chi}{C\cup\{V=\mu{X}.T\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,u:U\oplus{}X_1\multimap{}U\oplus{}X_2}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\text{Trace}_L$}
      \UnaryInfC{$\infer{\Gamma,\text{trace}_U\;u:V}{t:T}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\multimap{}X_2\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t:T\oplus{}X_1\multimap{}T\oplus{}X_2}{\Gamma'}{\chi}{C}$}
      \RightLabel{$\text{Trace}_R$}
      \UnaryInfC{$\infer{\Gamma}{\text{trace}_T\;t:V}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\multimap{}X_2\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,t_1:X}{t:T}{\Gamma'}{\chi_1}{C_1}$}
      \AxiomC{$\infer{\Gamma,t_2:X}{t:T}{\Gamma'}{\chi_2}{C_2}$}
      \LeftLabel{$\text{Par}_L$}
      \BinaryInfC{$\infer{\Gamma,t_1\parallel{}t_2:V}{t:T}{\Gamma'}{\chi_1\cup\chi_2\cup\{X\}}{C_1\cup{}C_2\cup\{V=X\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t_1:X}{\Gamma'}{\chi_1}{C_1}$}
      \AxiomC{$\infer{\Gamma}{t_2:X}{\Gamma'}{\chi_2}{C_2}$}
      \RightLabel{$\text{Par}_R$}
      \BinaryInfC{$\infer{\Gamma}{t_1\parallel{}t_2:V}{\Gamma'}{\chi_1\cup\chi_2\cup\{X\}}{C_1\cup{}C_2\cup\{V=X\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,t_1:X_1\multimap{}X_2,t_2:X_2\multimap{}X_3}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\text{Seq}_L$}
      \UnaryInfC{$\infer{\Gamma,t_1\fcmp{}t_2:V}{t:T}{\Gamma'}{\chi\cup\{X_1,X_2,X_3\}}{C\cup\{V=X_1\multimap{}X_3\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t_1:X_1\multimap{}X_2}{\Gamma'}{\chi_1}{C_1}$}
      \AxiomC{$\infer{\Gamma'}{t_2:X_2'\multimap{}X_3}{\Gamma''}{\chi_2}{C_2}$}
      \RightLabel{$\text{Seq}_R$}
      \BinaryInfC{$\infer{\Gamma}{t_1\fcmp{}t_2:V}{\Gamma''}{\chi_1\cup\chi_2\cup\{X_1,X_2,X_3\}}{C_1\cup{}C_2\cup\{V=X_1\multimap{}X_3\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,u:X_2\multimap{}X_1}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\dagger_L$}
      \UnaryInfC{$\infer{\Gamma,u^\dagger:}{t:T}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\multimap{}X_2\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t:X_2\multimap{}X_1}{\Gamma'}{\chi}{C}$}
      \RightLabel{$\dagger_R$}
      \UnaryInfC{$\infer{\Gamma}{t^\dagger:V}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\multimap{}X_2\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\text{id}_L$}
      \UnaryInfC{$\infer{\Gamma,\text{id}:V}{t:T}{\Gamma'}{\chi\cup\{X\}}{C\cup\{V=X\multimap{}X\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$\text{id}_R$}
      \UnaryInfC{$\infer{\Gamma}{\text{id}:V}{\Gamma}{\{X\}}{\{V=X\multimap{}X\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\varnothing_\text{L}$}
      \UnaryInfC{$\infer{\Gamma,\varnothing:V}{t:T}{\Gamma'}{\chi\cup\{X\}}{C\{V=X\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$\varnothing_\text{R}$}
      \UnaryInfC{$\infer{\Gamma}{\varnothing:V}{\Gamma}{\{X\}}{\{V=X\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    % \begin{bprooftree}
    %   \AxiomC{$\infer{\Gamma,u:X_1\multimap{}X_2,u_1:X_1}{t:T}{\Gamma'}{\chi}{C}$}
    %   \LeftLabel{$\text{App}_L$}
    %   \UnaryInfC{$\infer{\Gamma,u\;\text{@}\;u_1:V}{t:T}{\Gamma'}{\chi_1\cup\{X_1,X_2\}}{C\cup\{V=X_2\}}$}
    % \end{bprooftree}
    % \begin{bprooftree}
    %   \AxiomC{$\infer{\Gamma}{t:X_1\multimap{}X_2}{\Gamma'}{\chi_1}{C_1}$}
    %   \AxiomC{$\infer{\Gamma'}{t_1:X_1}{\Gamma''}{\chi_2}{C_2}$}
    %   \RightLabel{$\text{App}_R$}
    %   \BinaryInfC{$\infer{\Gamma}{t\;\text{@}\;t_1:V}{\Gamma''}{\chi_1\cup\chi_2\cup\{X_1,X_2\} }{C_1\cup{}C_2\cup\{V=X_2\}}$}
    % \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{}{f:X_1\multimap{}X_2}{}{\chi_1}{C_1}$}
      \AxiomC{$\infer{}{e:X_1}{}{\chi_2}{C_2}$}
      \RightLabel{$\text{App}$}
      \BinaryInfC{$\infer{}{f\;\text{@}\;e:V}{}{\chi_1\cup\chi_2\cup\{X_1,X_2\} }{C_1\cup{}C_2\cup\{V=X_2\}}$}
    \end{bprooftree}
  \end{center}
  \caption{Type Inference rules}
  \label{fig:ty_infer}
\end{figure}

\newpage

\section{表示的意味論}

\begin{figure}[H]
  \begin{minipage}[b]{0.48\columnwidth}
    \begin{align*}
      \judge{\Theta}{T}                  &: \mathcal{V}^{|\Theta|} {\bf\rightarrow} \mathcal{V} \\
      \judge{\Theta}{X_i}                &:= \Pi_i \\
      \judge{\Theta}{\mathrm{I}}         &:= K_I \\
      \judge{\Theta}{T_1\oplus{}T_2}     &:= \oplus\circ\langle\judge{\Theta}{T_1},\judge{\Theta}{T_2}\rangle \\
      \judge{\Theta}{T_1\otimes{}T_2}    &:= \otimes\circ\langle\judge{\Theta}{T_1},\judge{\Theta}{T_2}\rangle \\
      \judge{\Theta}{T_1\multimap{}T_2}  &:= \otimes\circ\langle\judge{\Theta}{T_1}^\star,\judge{\Theta}{T_2}\rangle \\
      \judge{\Theta}{\mu{X}.T}           &:= \judge{\Theta,X}{T}^\sharp \\
      \judge{\Theta}{T[X \rightarrow U]} &:= \judge{\Theta}{T}\circ\langle{Id,\judge{\Theta}{U}}\rangle \\
      \semantics{T}                      &:= \judge{}{T}(\ast) \in Obj(\mathcal{V})
      %（ただしここで$\ast$は，スモール圏の圏$\mathbf{Cat}$における終対象$\mathbf{1}$の唯一の対象）
    \end{align*}
    \caption{Type Interpretation}
    \label{fig:ty_interpret}
  \end{minipage}
  \begin{minipage}[b]{0.48\columnwidth}
    \begin{align*}
      \semantics{\Gamma} &\in Obj(\mathcal{V}) \\
      \semantics{} &:= I \\
      \semantics{\Gamma,\text{()}:\mathrm{I}} &:= \semantics{\Gamma} \\
      \semantics{\Gamma,\text{inl}\;t_1:T_1\oplus{}T_2} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\oplus\semantics{T_2}) \\
      \semantics{\Gamma,\text{inr}\;t_2:T_1\oplus{}T_2} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\oplus\semantics{T_2}) \\
      \semantics{\Gamma,t_1\times{}t_2:T_1\otimes{}T_2} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\otimes\semantics{T_2}) \\
      \semantics{\Gamma,t_1\mapsto{}t_2:T_1\multimap{}T_2} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\multimap\semantics{T_2}) \\
      \semantics{\Gamma,\text{fold}_{\mu{X}.T}\;u:\mu{X}.T} &:= \semantics{\Gamma}\otimes\semantics{\mu{X}.T} \\
      \semantics{\Gamma,\text{trace}_T\;t:T_1\multimap{}T_2} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\multimap\semantics{T_2}) \\
      \semantics{\Gamma,t_1\parallel{}t_2:T} &:= \semantics{\Gamma}\otimes\semantics{T} \\
      \semantics{\Gamma,t_1\fcmp{}t_2:T_1\multimap{}T_3} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\multimap\semantics{T_3}) \\
      \semantics{\Gamma,t^\dagger:T_1\multimap{}T_2} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\multimap\semantics{T_2}) \\
      \semantics{\Gamma,\text{id}:T\multimap{}T} &:= \semantics{\Gamma} \\
      \semantics{\Gamma,\varnothing:T} &:= \semantics{\Gamma} \\
      \semantics{f\;\text{@}\;e:T} &:= \semantics{\Gamma}\otimes\semantics{T}
    \end{align*}
    \caption{Context Interpretation}
    \label{fig:cxt_interpret}
  \end{minipage}
\end{figure}

\begin{figure}[H]
  \small
  \begin{align*}
    \semantics{\Gamma \vdash t:T}  &: \semantics{\Gamma} \rightarrow \semantics{T} \\
    % variable
    \judge{x:T}{x:T}               &:= \semantics{T} \xrightarrow{id_{\semantics{T}}} \semantics{T} \\
    % exchange
    \judge{\Gamma_1,\Gamma_2}{t:T} &:= \semantics{\Gamma_1}\otimes\semantics{\Gamma_2}
    \xrightarrow{\sigma_{\semantics{\Gamma_1},\semantics{\Gamma_2}}} \semantics{\Gamma_2}\otimes\semantics{\Gamma_1} \xrightarrow{\judge{\Gamma_2,\Gamma_1}{t:T}} \semantics{T} \\
    % unit_l
    \judge{\Gamma,():\mathrm{I}}{t:T}       &:= \semantics{\Gamma}\otimes{}I \xrightarrow{\rho_{\semantics{\Gamma}}} \semantics{\Gamma} \xrightarrow{\judge{\Gamma}{t:T}} \semantics{T} \\
    % unit_r
    \judge{}{():\mathrm{I}}                 &:= \semantics{} \xrightarrow{id_I} \semantics{\mathrm{I}} \\
    % inl_l
    \judge{\Gamma,\text{inl}\;t_1:T_1\oplus{}T_2}{t:T} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\oplus\semantics{T_2}) \xrightarrow{id_{\semantics{\Gamma}}\otimes\pi_1} \semantics{\Gamma}\otimes{}\semantics{T_1} \xrightarrow{\judge{\Gamma,t_1:T_1}{t:T}} \semantics{T} \\
    % inl_r
    \judge{\Gamma}{\text{inl}\;t_1:T_1\oplus{}T_2}     &:= \semantics{\Gamma} \xrightarrow{\judge{\Gamma}{t_1:T_1}} \semantics{T_1} \xrightarrow{\iota_1} \semantics{T_1}\oplus\semantics{T_2} \\
    % inr_l
    \judge{\Gamma,\text{inr}\;t_2:T_1\oplus{}T_2}{t:T} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\oplus\semantics{T_2}) \xrightarrow{id_{\semantics{\Gamma}}\otimes\pi_2} \semantics{\Gamma}\otimes{}\semantics{T_2} \xrightarrow{\judge{\Gamma,t_2:T_2}{t:T}} \semantics{T} \\
    % inr_r
    \judge{\Gamma}{\text{inr}\;t_1:T_1\oplus{}T_2}     &:= \semantics{\Gamma} \xrightarrow{\judge{\Gamma}{t_2:T_2}} \semantics{T_2} \xrightarrow{\iota_2} \semantics{T_1}\oplus\semantics{T_2} \\
    % tensor_l
    \judge{\Gamma,t_1\times{}t_2:T_1\otimes{}T_2}{t:T} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\otimes\semantics{T_2}) \xrightarrow{\judge{\Gamma,t_1:T_1,t_2:T_2}{t:T}} \semantics{T} \\
    % tensor_r
    \judge{\Gamma_1,\Gamma_2}{t_1\times{}t_2:T_1\otimes{}T_2} &:= \semantics{\Gamma_1}\otimes\semantics{\Gamma_2} \xrightarrow{\judge{\Gamma_1}{t_1:T_1}\otimes\judge{\Gamma_1}{t_2:T_2}} \semantics{T_1}\otimes\semantics{T_2} \\
    % function_l
    \judge{\Gamma_1,\Gamma_2,t_1\mapsto{}t_2:T_1\multimap{}T_2}{t:T} &:=
    \left(\semantics{\Gamma_1}\otimes\semantics{\Gamma_2}\otimes(\semantics{T_1}\multimap\semantics{T_2}) \cong \semantics{\Gamma_1}\otimes(\semantics{\Gamma_2}\otimes\semantics{T_2})\otimes\semantics{T_1}^\star \rightarrow \semantics{T}\right) \\
    &\cong \left(\semantics{\Gamma_1}\otimes(\semantics{\Gamma_2}\otimes\semantics{T_2}) \xrightarrow{\judge{\Gamma_1}{t_1:T_1}\otimes\judge{\Gamma_2,t_2:T_2}{t:T}} \semantics{T_1}\otimes\semantics{T}\right) \\
    % function_r
    \judge{\Gamma}{t_1\mapsto{}t_2:T_1\multimap{}T_2} &:= \semantics{\Gamma} \rightarrow \semantics{T_1}\multimap\semantics{T_2} \cong \left(\semantics{\Gamma}\otimes\semantics{T_1} \xrightarrow{\judge{\Gamma,t_1:T_1}{t_2:T_2}} \semantics{T_2}\right) \\
    % fold_l
    \judge{\Gamma,\text{fold}_{\mu{X}.U}\;u:\mu{X}.U}{t:T} &:= \semantics{\Gamma}\otimes\semantics{\mu{X}.U} \xrightarrow{id_{\semantics{\Gamma}}\otimes{}unfold_{\mu{X}.U}} \semantics{\Gamma}\otimes\semantics{[X \rightarrow \mu{X}.U](U)} \\
    &\quad \xrightarrow{\judge{\Gamma,u:[X \rightarrow \mu{X}.U](U)}{t:T}} \semantics{T} \\
    % fold_r
    \judge{\Gamma}{\text{fold}_{\mu{X}.T}\;t:\mu{X}.T} &:= \semantics{\Gamma} \xrightarrow{\judge{\Gamma}{t:[X \rightarrow \mu{X}.T](T)}} \semantics{[X \rightarrow \mu{X}.T](T)} \xrightarrow{fold_{\mu{X}.T}} \semantics{\mu{X}.T} \\
    % trace_l
    \judge{\Gamma,\text{trace}_U\;u:T_1\multimap{}T_2}{t:T} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\multimap\semantics{T_2}) \xrightarrow{id_{\semantics{\Gamma}}\otimes{}Tr_{\semantics{T_1},\semantics{T_2}}^{\semantics{U}}\left(\judge{\Gamma,t:(U\oplus{}T_1)\multimap(U\oplus{}T_2)}{t:T}\right)} \semantics{T} \\
    % trace_r
    \judge{\Gamma}{\text{trace}_U\;t:T_1\multimap{}T_2} &:= \semantics{\Gamma} \xrightarrow{Tr_{\semantics{T_1},\semantics{T_2}}^{\semantics{U}}\left(\judge{\Gamma}{t:U\oplus{}T_1\multimap{}U\oplus{}T_2}\right)} \semantics{T_1}\multimap\semantics{T_2} \\
    % parallel_l
    \judge{\Gamma,t_1\parallel{}t_2:U}{t:T} &:= \semantics{\Gamma}\otimes{}\semantics{U} \xrightarrow{id_{\semantics{\Gamma}}\otimes(\judge{\Gamma,t_1:U}{t:T}+\judge{\Gamma,t_2:U}{t:T})} \semantics{T} \\
    % parallel_r
    \judge{\Gamma}{t_1\parallel{}t_2:T} &:= \semantics{\Gamma} \xrightarrow{\judge{\Gamma}{t_1:T}+\judge{\Gamma}{t_2:T}} \semantics{T} \\
    % sequence_l
    \judge{\Gamma,t_1\fcmp{}t_2:T_1\multimap{}T_3}{t:T} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\multimap\semantics{T_3}) \\
    &\quad \xrightarrow{id_{\Gamma}\otimes{}decomp_{\semantics{T_1},\semantics{T_2},\semantics{T_3}}} \semantics{\Gamma}\otimes\left((\semantics{T_1}\multimap\semantics{T_2})\otimes(\semantics{T_2}\multimap\semantics{T_3})\right) \\
    &\quad \xrightarrow{\judge{\Gamma,t_1:T_1\multimap{}T_2,t_2:T_2\multimap{}T_3}{t:T}} \semantics{T} \\
    % sequence_r
    \judge{\Gamma_1,\Gamma_2}{t_1\fcmp{}t_2:T_1\multimap{}T_3} &:= \semantics{\Gamma_1}\otimes\semantics{\Gamma_2} \xrightarrow{\judge{\Gamma_1}{t_1:T_1\multimap{}T_2}\otimes\judge{\Gamma_2}{t_2:T_2\multimap{}T_3}} (\semantics{T_1}\multimap\semantics{T_2})\otimes(\semantics{T_2}\multimap\semantics{T_3}) \\
    &\quad \xrightarrow{comp_{\semantics{T_1},\semantics{T_2},\semantics{T_3}}} \semantics{T_1}\multimap\semantics{T_3} \\
    % dagger_l
    \judge{\Gamma,u^\dagger:T_1\multimap{}T_2}{t:T} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\multimap\semantics{T_2}) \xrightarrow{id_{\semantics{\Gamma}}\otimes{}dagger_{\semantics{T_1},\semantics{T_2}}} \semantics{\Gamma}\otimes(\semantics{T_2}\multimap\semantics{T_1}) \xrightarrow{\judge{\Gamma,u:T_2\multimap{}T_1}{t:T}} \semantics{T} \\
    % dagger_r
    \judge{\Gamma}{t^\dagger:T_1\multimap{}T_2} &:= \semantics{\Gamma} \xrightarrow{\judge{\Gamma}{t:T_2\multimap{}T_1}} \semantics{T_2}\multimap\semantics{T_1} \xrightarrow{dagger_{\semantics{T_1},\semantics{T_2}}} \semantics{T_1}\multimap\semantics{T_2} \\
    % identity_l
    \judge{\Gamma,\text{id}:U\multimap{}U}{t:T} &:= \semantics{\Gamma} \xrightarrow{\judge{\Gamma}{t:T}} \semantics{T} \\
    % identity_r
    \judge{}{\text{id}:T\multimap{}T} &:= \semantics{} \rightarrow \semantics{T}\multimap\semantics{T} \cong \left(\semantics{T} \xrightarrow{id_{\semantics{T}}} \semantics{T}\right) \\
    % zero_l
    \judge{\Gamma,\varnothing:U}{t:T} &:= \semantics{\Gamma} \xrightarrow{\judge{\Gamma}{t:T}} \semantics{T} \\
    % zero_r
    \judge{\Gamma}{\varnothing:T} &:= \semantics{\Gamma} \xrightarrow{0_{\semantics{\Gamma},\semantics{T}}} \semantics{T} \\
    % application
    \judge{}{t\;\text{@}\;t_1:T_2} &:= \semantics{} \xrightarrow{\judge{}{t:T_1\multimap{}T_2}\otimes\judge{}{t_1:T_1}} (\semantics{T_1}\multimap\semantics{T_2})\otimes\semantics{T_1} \xrightarrow{eval_{\semantics{T_1},\semantics{T_2}}} \semantics{T_2}
  \end{align*}
  \caption{Term Interpretation}
  \label{fig:tm_interpret}
\end{figure}

% 以下のコメントアウト箇所は\itembox環境を利用しているため，ascmacパッケージが必要なの

% \begin{itembox}[c]{Type Interpretation}
% $|\Theta|$はコンテキスト$\Theta$に含まれる型変数の数 \\
% 圏$\bf{V}$はトレース双積付きダガーコンパクト圏(Dagger Compact Category with Traced Finite Biproduct)
% \begin{itemize}
%   \item $F: {\bf V}^n \rightarrow {\bf V}$は$n$多重関手
%   \item $\Pi_i:{\bf V}^{|\Theta|} \rightarrow {\bf V}$は射影関手
%   \item $K_I:{\bf V}^{|\Theta|} \rightarrow {\bf V}$は定数$I$関手
%   \item $\otimes:{\bf V} \times {\bf V} \rightarrow {\bf V}$はテンソル積関手
%   \item $\oplus:{\bf V} \times {\bf V} \rightarrow {\bf V}$は双積関手
%   \item $(-)^\star:{\bf V}^{op} \rightarrow {\bf V}$は充満忠実自己反変関手
%   \item $[-,-]:{\bf V}^{op} \times {\bf V} \rightarrow {\bf V}$は内部ホム関手
%   \item $Id_{\bf V}$は恒等関手
%   \item 圏$\bf{V}$と関手$F:{\bf V}^n \rightarrow {\bf V}\quad(n \ge 1)$について，パラメトライズされた$F$の始代数は，以下を満たす組$(F^\sharp, \phi^F)$
%     \begin{itemize}
%       \item $F^\sharp:{\bf V}^{n-1} \rightarrow {\bf V}$は関手
%       \item $\phi^F:F\circ\langle{Id,F^\sharp}\rangle \Rightarrow F^\sharp:{\bf V}^{n-1} \rightarrow {\bf V}$は自然同型
%       \item 全ての$T\in|{\bf V}^{n-1}|$について，組$(F^\sharp(T),\phi^F_T)$は$F(T,-)\mathchar`-$始代数
%     \end{itemize}
% \end{itemize}
%   \begin{align*}
%     \semantics{\Theta \vdash T}                  &: {\bf V}^{|\Theta|} {\bf\rightarrow} {\bf V} \\
%     \semantics{\Theta \vdash X_i}                &= \Pi_i \\
%     \semantics{\Theta \vdash I}                  &= K_I \\
%     \semantics{\Theta \vdash T_1\oplus{}T_2}     &= \oplus\circ\langle\semantics{\Theta \vdash T_1},\semantics{\Theta \vdash T_2}\rangle \\
%     \semantics{\Theta \vdash T_1\otimes{}T_2}    &= \otimes\circ\langle\semantics{\Theta \vdash T_1},\semantics{\Theta \vdash T_2}\rangle \\
%     \semantics{\Theta \vdash T_1\multimap{}T_2}  &= \otimes\circ\langle\semantics{\Theta \vdash T_1}^\star,\semantics{\Theta \vdash T_2}\rangle \\
%     \semantics{\Theta \vdash \mu{X}.T}           &= \semantics{\Theta,X \vdash T}^\sharp \\
%     \semantics{\Theta \vdash T[X \rightarrow U]} &= \semantics{\Theta \vdash T}\circ\langle{Id,\semantics{\Theta \vdash U}}\rangle \\
%     \semantics{T}                                &:= \semantics{\; \vdash T}(\ast) \in |{\bf V}|
%   \end{align*}
%   $\ast$は，スモール圏の圏$\mathbf{Cat}$における終対象$\mathbf{1}$の唯一の対象
% \end{itembox}

% \begin{itembox}[c]{Denotational Semantics}
% $Hom_{\bf V}(A,B)$ is morphism which Domain and Codomain are $A\in|{\bf V}|$ and $B\in |{\bf V}|$, respectively. \\
% $id_T$ is identity morphism of $T \in|{\bf V}|$. \\
% $0_{A,B}$ is zero morphism of $Hom_{\bf V}(A,B)$. \\
% $\iota_i$ is injection morphism. \\
% $\pi_i$ is projection morphism. \\
% $\pi_i = \iota_i^{-1}$ \\
% $\pi_i\circ\iota_j = id$ if $i = j$ \\
% $\pi_i\circ\iota_j = 0$ otherwise \\
% $unfold_{\mu{X}.T} = fold^{-1}_{\mu{X}.T}$ \\
% $f \circ (g \oplus h) = (f \circ g) \oplus (f \circ h)$ \\
% $(f \oplus g) \circ h = (f \circ h) \oplus (g \circ h)$ \\
% $id_A \otimes id_B = id_{A \otimes B}$ \\
% $(f \otimes g) \circ (h \otimes k) = (f \circ h) \otimes (g \circ k)$ \\
% $f^{\star\star} = f$ \\
% ${(f \otimes g)}^\star = f^\star \otimes g^\star$ \\
% $\Delta_T : T \rightarrow T\oplus{}T$ satisfying $\pi_i\circ\Delta_T = id_T$ \\
% $\nabla_T : T\oplus{}T \rightarrow T$ satisfying $\iota_i\circ\nabla_T = id_T $ \\
% $f+g = \Delta_T \circ (f\oplus{}g) \circ \nabla_U$ \\
% % $S : {\bf V}(T,T)$ is additive antipode \\
% $Tr_U^{X,Y}(f) : {\bf V}(X,Y)$ which $f : {\bf V}(U\oplus{}X, U\oplus{}Y)$ 
%   \begin{align*}
%     \semantics{t:T}                                 &\in \semantics{T} \\
%     \semantics{\text{id}:T}                         &= 1 \\
%     \semantics{\varnothing:T}                       &= 0 \\ % undefined
%     \semantics{x:T}                                 &= x \\
%     \semantics{\text{()}:I}                         &= \ast \\
%     \semantics{\text{inl}\;t_1:T_1\oplus{}T_2}      &= \iota_1(\semantics{t_1:T_1}) \\
%     \semantics{\text{inr}\;t_2:T_1\oplus{}T_2}      &= \iota_2(\semantics{t_2:T_2}) \\
%     \semantics{t_1\times{}t_2:T_1\otimes{}T_2}      &= \semantics{t_1:T_1}\otimes\semantics{t_2:T_2} \\
%     \semantics{t_1\mapsto{}t_2:T_1\multimap{}T_2}   &= \semantics{t_1:T_1}^\star\otimes\semantics{t_2:T_2} \\
%     \semantics{\text{fold}\;t:\mu{X}.T}             &= fold_{\mu{X}.T}(\semantics{t:T[X/\mu{X}.T]}) \\
%     \semantics{t_1+t_2:T}                           &= \tfrac{1}{\sqrt{2}}(\semantics{t_1:T}+\semantics{t_2:T}) \\
%     \semantics{t_1\fcmp{}t_2:T_1\multimap{}T_3}     &= \semantics{t_2:T_2\multimap{}T_3}\circ\semantics{t_1:T_1\multimap{}T_2} \\
%     \semantics{\text{trace}_U\;t:T_1\multimap{}T_2} &= Tr_{T_1,T_2}^U(\semantics{t:(U\oplus{}T_1)\multimap(U\oplus{}T_2)}) \\
%     \semantics{t^\dagger:T_1\multimap{}T_2}         &= \semantics{t:T_2\multimap{}T_1}^{-1} \\
%     \semantics{t\;\text{@}\;t_1:T_2}                &= \semantics{t:T_1\multimap{}T_2}(\semantics{t_1:T_1}) \\
%   \end{align*}
% \end{itembox}

\newpage

\section{操作的意味論}

\begin{figure}[H]
  \begin{equation*}
    \sigma_1\cup^\times_\bot\sigma_2 :=
    \begin{cases}
      \bot                 &\text{if}\;\sigma_1=\bot\vee\sigma_2=\bot \\
      \sigma_1\cup\sigma_2 &\text{otherwise}
    \end{cases}
  \end{equation*}
  \begin{equation*}
    \sigma_1\cup^+_\bot\sigma_2 :=
    \begin{cases}
      \bot                 &\text{if}\;\sigma_1=\bot\wedge\sigma_2=\bot \\
      \sigma_1             &\text{if}\;\sigma_2=\bot \\
      \sigma_2             &\text{if}\;\sigma_1=\bot \\
      \sigma_1\cup\sigma_2 &\text{otherwise}
    \end{cases}
  \end{equation*}
  % \begin{equation*}
  %   \sigma_1\ltimes_\bot\sigma_2 :=
  %   \begin{cases}
  %     \sigma_1 &\text{if}\;\sigma_1\neq\bot \\
  %     \sigma_2 &\text{if}\;\sigma_1=\bot\wedge\sigma_2\neq\bot \\
  %     \bot     &\text{otherwise}
  %   \end{cases}
  % \end{equation*}
  % \begin{equation*}
  %   \sigma_1\rtimes_\bot\sigma_2 :=
  %   \begin{cases}
  %     \sigma_2 &\text{if}\;\sigma_2\neq\bot \\
  %     \sigma_1 &\text{if}\;\sigma_2=\bot\wedge\sigma_1\neq\bot \\
  %     \bot     &\text{otherwise}
  %   \end{cases}
  % \end{equation*}
  \caption{Operations on Environment $\sigma$}
  \label{fig:op_env}
\end{figure}

\begin{figure}[H]
  \begin{minipage}[b]{0.48\hsize}
    \begin{alignat*}{2}
      x                 &\triangleright t                 \;&:=\; &[x \rightarrow t] \\
      ()                &\triangleright ()                \;&:=\; &[\;] \\
      \text{inl}\;t     &\triangleright \text{inl}\;u     \;&:=\; &t \triangleright u \\
      \text{inl}\;t     &\triangleright \text{inr}\;u     \;&:=\; &\bot \\
      \text{inr}\;t     &\triangleright \text{inr}\;u     \;&:=\; &t \triangleright u \\
      \text{inr}\;t     &\triangleright \text{inl}\;u     \;&:=\; &\bot \\
      t_1\times{}t_2    &\triangleright u_1\times{}u_2    \;&:=\; &(t_1 \triangleright u_1)\cup^\times_\bot(t_2 \triangleright u_2) \\
      t_1\mapsto{}t_2   &\triangleright u_1\mapsto{}u_2   \;&:=\; &(t_1 \triangleright u_1)\cup^\times_\bot(t_2 \triangleright u_2) \\
      \text{fold}_T\;t  &\triangleright \text{fold}_T\;u  \;&:=\; &t \triangleright u \\
      \text{trace}_T\;t &\triangleright \text{trace}_T\;u \;&:=\; &t \triangleright u \\
      t                 &\triangleright u_1\parallel{}u_2 \;&:=\; &(t \triangleright u_1)\cup^+_\bot(t \triangleright u_2) \\
      t_1\parallel{}t_2 &\triangleright u                 \;&:=\; &(t_1 \triangleright u)\cup^+_\bot(t_2 \triangleright u) \\
      t_1\fcmp{}t_2     &\triangleright u_1\fcmp{}u_2     \;&:=\; &(t_1 \triangleright u_1)\cup^\times_\bot(t_2 \triangleright u_2) \\
      t\fcmp{}x         &\triangleright u                 \;&:=\; &x \triangleright t^\dagger\fcmp{}u \\
      x\fcmp{}t         &\triangleright u                 \;&:=\; &x \triangleright u\fcmp{}t^\dagger \\
      t^\dagger         &\triangleright u                 \;&:=\; &t \triangleright u^\dagger \\
      \text{id}         &\triangleright \text{id}         \;&:=\; &[\;] \\
      \varnothing       &\triangleright u                 \;&:=\; &\bot \\
      t                 &\triangleright \varnothing       \;&:=\; &\bot
    \end{alignat*}
    \caption{Constructing Environment}
    \label{fig:tm_mcth}
  \end{minipage}
  \begin{minipage}[b]{0.48\hsize}
    \begin{alignat*}{2}
      [\;]&(x)                                  \;&:=\; &\varnothing \\
      [\sigma,x\rightarrow t]&(x)               \;&:=\; &t \\
      [\sigma,x'\rightarrow t]&(x)              \;&:=\; &\varnothing \\
      [\sigma]&(())                             \;&:=\; &() \\
      [\sigma]&(\text{inl}\;t)                  \;&:=\; &\text{inl}\;[\sigma](t) \\
      [\sigma]&(\text{inr}\;t)                  \;&:=\; &\text{inr}\;[\sigma](t) \\
      [\sigma_1,\sigma_2]&(t_1\times{}t_2)      \;&:=\; &[\sigma](t_1)\times[\sigma](t_2) \\
      [\sigma_1,\sigma_2]&(t_1\mapsto{}t_2)     \;&:=\; &[\sigma](t_1)\mapsto[\sigma](t_2) \\
      [\sigma]&(\text{fold}_T\;t)    \;&:=\; &\text{fold}_T\;[\sigma](t) \\
      [\sigma]&(\text{trace}_T\;t)   \;&:=\; &\text{trace}_T\;[\sigma](t) \\
      [\sigma_1,\sigma_2]&(t_1\parallel{}t_2)   \;&:=\; &[\sigma](t_1)\parallel[\sigma](t_2) \\
      [\sigma]&(t_1\fcmp{}t_2)       \;&:=\; &[\sigma](t_1)\fcmp[\sigma](t_2) \\
      [\sigma]&(t^\dagger)           \;&:=\; &[\sigma](t)^\dagger \\
      [\sigma]&(\text{id})           \;&:=\; &\text{id} \\
      [\;]&(\varnothing)             \;&:=\; &\varnothing \\
      [\bot]&(t)                     \;&:=\; &\varnothing
    \end{alignat*}
    \caption{Consumption of Environment}
    \label{fig:tm_sbst}
  \end{minipage}
\end{figure}

\begin{figure}[H]
  \begin{align*}
    \reduct{\varnothing\parallel{}t}{t} &
    \reduct{\varnothing^\dagger}{\varnothing} \\
    \reduct{(t_1\parallel{}t_2)\parallel{}t_3}{t_1\parallel(t_2\parallel{}t_3)} &
    \reduct{\text{id}^\dagger}{\text{id}} \\
    \reduct{t_1\parallel{}t_2}{t_2\parallel{}t_1} &
    \reduct{()^\dagger}{()} \\
    \reduct{t\parallel{}t}{t} &
    \reduct{(t_1\parallel{}t_2)^\dagger}{t_1^\dagger\parallel{}t_2^\dagger} \\
    \reduct{\text{id}\fcmp{}t}{t} &
    \reduct{(t_1\fcmp{}t_2)^\dagger}{t_1^\dagger\fcmp{}t_2^\dagger} \\
    \reduct{t\fcmp\text{id}}{t} &
    \reduct{(\text{inl}\;t)^\dagger}{\text{inl}\;t^\dagger} \\
    \reduct{(t_1\fcmp{}t_2)\fcmp{}t_3}{t_1\fcmp(t_2\fcmp{}t_3)} &
    \reduct{(\text{inr}\;t)^\dagger}{\text{inr}\;t^\dagger} \\
    \reduct{\varnothing\fcmp{}t}{\varnothing} &
    \reduct{(t_1\times{}t_2)^\dagger}{t_1^\dagger\times{}t_2^\dagger} \\
    \reduct{t\fcmp\varnothing}{\varnothing} &
    \reduct{(t_1\mapsto{}t_2)^\dagger}{t_1^\dagger\mapsto{}t_2^\dagger} \\
    \reduct{(t_1\parallel{}t_2)\fcmp{}t_3}{(t_1\fcmp{}t_3)\parallel(t_2\fcmp{}t_3)} &
    \reduct{(\text{fold}_T\;t)^\dagger}{\text{fold}_T\;t^\dagger} \\
    \reduct{t_1\fcmp(t_2\parallel{}t_3)}{(t_1\fcmp{}t_2)\parallel(t_1\fcmp{}t_3)} &
    \reduct{(\text{trace}_T\;t)^\dagger}{\text{trace}_T\;t^\dagger} \\
    && \reduct{(t^\dagger)^\dagger}{t} \\
    \reduct{\text{inl}\;\varnothing}{\varnothing} &
    \reduct{\text{inl}\;(t_1\parallel{}t_2)}{\text{inl}\;t_1\parallel\text{inl}\;t_2} \\
    \reduct{\text{inr}\;\varnothing}{\varnothing} &
    \reduct{\text{inr}\;(t_1\parallel{}t_2)}{\text{inr}\;t_1\parallel\text{inr}\;t_2} \\
    \reduct{\varnothing\times{}t}{\varnothing} &
    \reduct{(t_1\parallel{}t_2)\times{}t_3}{(t_1\times{}t_3)\parallel(t_2\times{}t_3)} \\
    \reduct{t\times\varnothing}{\varnothing} &
    \reduct{t_1\times(t_2\parallel{}t_3)}{(t_1\times{}t_2)\parallel(t_1\times{}t_3)} \\
    \reduct{\varnothing\mapsto{}t}{\varnothing} &
    \reduct{(t_1\parallel{}t_2)\mapsto{}t_3}{(t_1\mapsto{}t_3)\parallel(t_2\mapsto{}t_3)} \\
    \reduct{t\mapsto\varnothing}{\varnothing} &
    \reduct{t_1\mapsto(t_2\parallel{}t_3)}{(t_1\mapsto{}t_2)\parallel(t_1\mapsto{}t_3)} \\
    \reduct{\text{fold}_T\;\varnothing}{\varnothing} &
    \reduct{\text{fold}_T\;(t_1\parallel{}t_2)}{\text{fold}_T\;t_1\parallel\text{fold}_T\;t_2} \\
    \reduct{\text{trace}_T\;\varnothing}{\varnothing}
  \end{align*}
  \begin{align*}
    \reduction{t_1}{t_1'} \;\;\Longrightarrow\;\; \reduction{t_2}{t_2'} &\;\;\Longrightarrow\;\; \reduction{t_1\parallel{}t_2}{t_1'\parallel{}t_2'} \\
    \reduction{t_1}{t_1'} \;\;\Longrightarrow\;\; \reduction{t_2}{t_2'} &\;\;\Longrightarrow\;\; \reduction{t_1\fcmp{}t_2}{t_1'\fcmp{}t_2'} \\
    \reduction{t}{t'} &\;\;\Longrightarrow\;\; \reduction{\text{inl}\;t}{\text{inl}\;t'} \\
    \reduction{t}{t'} &\;\;\Longrightarrow\;\; \reduction{\text{inr}\;t}{\text{inr}\;t'} \\
    \reduction{t_1}{t_1'} \;\;\Longrightarrow\;\; \reduction{t_2}{t_2'} &\;\;\Longrightarrow\;\; \reduction{t_1\times{}t_2}{t_1'\times{}t_2'} \\
    \reduction{t_1}{t_1'} \;\;\Longrightarrow\;\; \reduction{t_2}{t_2'} &\;\;\Longrightarrow\;\; \reduction{t_1\mapsto{}t_2}{t_1'\mapsto{}t_2'} \\
    \reduction{t}{t'} &\;\;\Longrightarrow\;\; \reduction{\text{fold}_T\;t}{\text{fold}_T\;t'} \\
    \reduction{t}{t'} &\;\;\Longrightarrow\;\; \reduction{\text{trace}_T\;t}{\text{trace}_T\;t'} \\
    \reduction{t_1}{t_1'} \;\;\Longrightarrow\;\; \reduction{t_2}{t_2'} &\;\;\Longrightarrow\;\; \reduction{t_1\;\text{@}\;t_2}{t_1'\;\text{@}\;t_2'}
  \end{align*}
  \begin{align*}
    \reduct{(t_1\mapsto{}t_2)\;\text{@}\;t}{(t_1\triangleright{}t)\;t_2}
  \end{align*}
  \begin{align*}
    \reduct{\varnothing\;\text{@}\;t}{\varnothing} &
    \reduct{(t_1\parallel{}t_2)\;\text{@}\;t}{(t_1\;\text{@}\;t)\parallel(t_2\;\text{@}\;t)} \\
    \reduct{t\;\text{@}\;\varnothing}{\varnothing} &
    \reduct{t\;\text{@}\;(t_1\parallel{}t_2)}{(t\;\text{@}\;t_1)\parallel(t\;\text{@}\;t_2)} \\
    \reduct{\text{id}\;\text{@}\;t}{t} &
    \reduct{t_1\fcmp{}t_2\;\text{@}\;t}{t_2\;\text{@}\;(t_1\;\text{@}\;t)}
  \end{align*}
  \begin{align*}
    \reduction{t\;\text{@}\;(\text{inr}\;u)}{\text{inr}\;u'} &\;\;\Longrightarrow\;\; \reduction{(\text{trace}_T\;t)\;\text{@}\;u}{u'} \\
    \reduction{t\;\text{@}\;(\text{inr}\;u)}{\text{inl}\;u'} \;\;\Longrightarrow\;\; \reduction{(\text{trace}_T\;t)\;\text{@}\;(\text{inl}\;u')}{u''} &\;\;\Longrightarrow\;\; \reduction{(\text{trace}_T\;t)\;\text{@}\;u}{u''} \\
    \reduction{t\;\text{@}\;(\text{inl}\;u)}{\text{inl}\;u'} \;\;\Longrightarrow\;\; \reduction{(\text{trace}_T\;t)\;\text{@}\;(\text{inl}\;u')}{u''} &\;\;\Longrightarrow\;\; \reduction{(\text{trace}_T\;t)\;\text{@}\;u}{u''} \\
    \reduction{t\;\text{@}\;(\text{inl}\;u)}{\text{inr}\;u'} &\;\;\Longrightarrow\;\; \reduction{(\text{trace}_T\;t)\;\text{@}\;(\text{inl}\;u)}{u'}
  \end{align*}
  \caption{Reduction}
  \label{fig:reduction}
\end{figure}

\begin{figure}[H]
  \small
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$\sequent{\Gamma}{t:T}$}
          \UnaryInfC{$\equality{\Gamma}{t}{t}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$\equality{\Gamma}{t_2}{t_1}{T}$}
          \UnaryInfC{$\equality{\Gamma}{t_1}{t_2}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$\equality{\Gamma}{t_1}{t_2}{T}$}
          \AxiomC{$\equality{\Gamma}{t_2}{t_3}{T}$}
          \BinaryInfC{$\equality{\Gamma}{t_1}{t_3}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{\varnothing\parallel{}t}{t}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \TrinaryInfC{$\equality{\Gamma}{(t_1\parallel{}t_2)\parallel{}t_3}{t_1\parallel(t_2\parallel{}t_3)}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{t\parallel{}t}{t}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \BinaryInfC{$\equality{\Gamma}{t_1\parallel{}t_2}{t_2\parallel{}t_1}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{\text{id}\fcmp{}t}{t}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{t\fcmp\text{id}}{t}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \TrinaryInfC{$\equality{\Gamma}{(t_1\fcmp{}t_2)\fcmp{}t_3}{t_1\fcmp(t_2\fcmp{}t_3)}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{\varnothing\fcmp{}t}{\varnothing}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \TrinaryInfC{$\equality{\Gamma}{(t_1\parallel{}t_2)\fcmp{}t_3}{(t_1\fcmp{}t_3)\parallel(t_2\fcmp{}t_3)}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{t\fcmp\varnothing}{\varnothing}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \TrinaryInfC{$\equality{\Gamma}{t_1\fcmp(t_2\parallel{}t_3)}{(t_1\fcmp{}t_2)\parallel(t_1\fcmp{}t_2)}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{\text{inl}\;\varnothing}{\varnothing}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \BinaryInfC{$\equality{\Gamma}{\text{inl}\;(t_1\parallel{}t_2)}{\text{inl}\;t_1\parallel\text{inl}\;t_2}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{\text{inr}\;\varnothing}{\varnothing}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \BinaryInfC{$\equality{\Gamma}{\text{inr}\;(t_1\parallel{}t_2)}{\text{inr}\;t_1\parallel\text{inr}\;t_2}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{\varnothing\times{}t}{\varnothing}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \TrinaryInfC{$\equality{\Gamma}{(t_1\parallel{}t_2)\times{}t_3}{(t_1\times{}t_3)\parallel(t_2\times{}t_3)}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{t\times\varnothing}{\varnothing}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \TrinaryInfC{$\equality{\Gamma}{t_1\times(t_2\parallel{}t_3)}{(t_1\times{}t_2)\parallel(t_1\times{}t_3)}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{\varnothing\mapsto{}t}{\varnothing}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \TrinaryInfC{$\equality{\Gamma}{(t_1\parallel{}t_2)\mapsto{}t_3}{(t_1\mapsto{}t_3)\parallel(t_2\mapsto{}t_3)}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{t\mapsto\varnothing}{\varnothing}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \TrinaryInfC{$\equality{\Gamma}{t_1\mapsto(t_2\parallel{}t_3)}{(t_1\mapsto{}t_2)\parallel(t_1\mapsto{}t_3)}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{\text{fold}_T\;\varnothing}{\varnothing}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \BinaryInfC{$\equality{\Gamma}{\text{fold}_T\;(t_1\parallel{}t_2)}{\text{fold}_T\;t_1\parallel\text{fold}_T\;t_2}{T}$}
      \end{bprooftree}
  \end{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{\text{trace}_T\;\varnothing}{\varnothing}{T}$}
      \end{bprooftree}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{\varnothing^\dagger}{\varnothing}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{\text{id}^\dagger}{\text{id}}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{()^\dagger}{()}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{(t^\dagger)^\dagger}{t}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \BinaryInfC{$\equality{\Gamma}{(t_1\parallel{}t_2)^\dagger}{t_1^\dagger\parallel{}t_2^\dagger}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \BinaryInfC{$\equality{\Gamma}{(t_1\fcmp{}t_2)^\dagger}{t_1^\dagger\fcmp{}t_2^\dagger}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{(\text{inl}\;t)^\dagger}{\text{inl}\;t^\dagger}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{(\text{inr}\;t)^\dagger}{\text{inr}\;t^\dagger}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \BinaryInfC{$\equality{\Gamma}{(t_1\times{}t_2)^\dagger}{t_1^\dagger\times{}t_2^\dagger}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \BinaryInfC{$\equality{\Gamma}{(t_1\mapsto{}t_2)^\dagger}{t_1^\dagger\mapsto{}t_2^\dagger}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{(\text{fold}_T\;t)^\dagger}{\text{fold}_T\;t^\dagger}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{(\text{trace}_T\;t)^\dagger}{\text{trace}_T\;t^\dagger}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$\equality{\Gamma}{t_1}{t_1'}{T}$}
          \AxiomC{$\equality{\Gamma}{t_2}{t_2'}{T}$}
          \BinaryInfC{$\equality{\Gamma}{t_1\parallel{}t_2}{t_1'\parallel{}t_2'}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$\equality{\Gamma}{t_1}{t_1'}{T}$}
          \AxiomC{$\equality{\Gamma}{t_2}{t_2'}{T}$}
          \BinaryInfC{$\equality{\Gamma}{t_1\fcmp{}t_2}{t_1'\fcmp{}t_2'}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$\equality{\Gamma}{t}{t'}{T}$}
          \UnaryInfC{$\equality{\Gamma}{\text{inl}\;t}{\text{inl}\;t'}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$\equality{\Gamma}{t}{t'}{T}$}
          \UnaryInfC{$\equality{\Gamma}{\text{inr}\;t}{\text{inr}\;t'}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$\equality{\Gamma}{t_1}{t_1'}{T}$}
          \AxiomC{$\equality{\Gamma}{t_2}{t_2'}{T}$}
          \BinaryInfC{$\equality{\Gamma}{t_1\times{}t_2}{t_1'\times{}t_2'}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$\equality{\Gamma}{t_1}{t_1'}{T}$}
          \AxiomC{$\equality{\Gamma}{t_2}{t_2'}{T}$}
          \BinaryInfC{$\equality{\Gamma}{t_1\mapsto{}t_2}{t_1'\mapsto{}t_2'}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$\equality{\Gamma}{t}{t'}{T}$}
          \UnaryInfC{$\equality{\Gamma}{\text{fold}_T\;t}{\text{fold}_T\;t'}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$\equality{\Gamma}{t}{t'}{T}$}
          \UnaryInfC{$\equality{\Gamma}{\text{trace}_T\;t}{\text{trace}_T\;t'}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$\equality{\Gamma}{t_1}{t_1'}{T}$}
          \AxiomC{$\equality{\Gamma}{t_2}{t_2'}{T}$}
          \BinaryInfC{$\equality{\Gamma}{t_1\;\text{@}\;t_2}{t_1'\;\text{@}\;t_2'}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{(t_1\mapsto{}t_2)\;\text{@}\;t}{(t_1\triangleright{}t)\;(t_2)}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{\varnothing\;\text{@}\;t}{\varnothing}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \BinaryInfC{$\equality{\Gamma}{(t_1\parallel{}t_2)\;\text{@}\;t}{(t_1\;\text{@}\;t)\parallel(t_2\;\text{@}\;t)}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{t\;\text{@}\;\varnothing}{\varnothing}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \AxiomC{$ $}
          \BinaryInfC{$\equality{\Gamma}{t\;\text{@}\;(t_1\parallel{}t_2)}{(t\;\text{@}\;t_1)\parallel(t\;\text{@}\;t_2)}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{\text{id}\;\text{@}\;t}{t}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$ $}
          \UnaryInfC{$\equality{\Gamma}{t_1\fcmp{}t_2\;\text{@}\;t}{t_2\;\text{@}\;(t_1\;\text{@}\;t)}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$\equality{\Gamma}{t\;\text{@}\;(\text{inr}\;u)}{\text{inr}\;u'}{T}$}
          \UnaryInfC{$\equality{\Gamma}{(\text{trace}_T\;t)\;\text{@}\;u}{u'}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$\equality{\Gamma}{t\;\text{@}\;(\text{inl}\;u)}{\text{inl}\;u'}{T}$}
          \AxiomC{$\equality{\Gamma}{(\text{trace}_T\;t)\;\text{@}\;(\text{inl}\;u')}{u''}{T}$}
          \BinaryInfC{$\equality{\Gamma}{(\text{trace}_T\;t)\;\text{@}\;(\text{inl}\;u)}{u''}{T}$}
      \end{bprooftree}
  \end{center}
  \begin{center}
      \begin{bprooftree}
          \AxiomC{$\equality{\Gamma}{t\;\text{@}\;(\text{inr}\;u)}{\text{inl}\;u'}{T}$}
          \AxiomC{$\equality{\Gamma}{(\text{trace}_T\;t)\;\text{@}\;(\text{inl}\;u')}{u''}{T}$}
          \BinaryInfC{$\equality{\Gamma}{(\text{trace}_T\;t)\;\text{@}\;u}{u''}{T}$}
      \end{bprooftree}
      \begin{bprooftree}
          \AxiomC{$\equality{\Gamma}{t\;\text{@}\;(\text{inl}\;u)}{\text{inr}\;u'}{T}$}
          \UnaryInfC{$\equality{\Gamma}{(\text{trace}_T\;t)\;\text{@}\;(\text{inl}\;u)}{u'}{T}$}
      \end{bprooftree}
  \end{center}
  \caption{equality judgement}
  \label{fig:equality}
\end{figure}

% \section{評価戦略}

% \begin{figure}[H]
%   \begin{align*}
%     \varnothing \prec x \prec \text{()} \prec \text{inl}\;t \prec \text{inl}\;t \prec t\times{}t \prec t\mapsto{}t \prec \text{fold}_T\;t \prec \text{trace}_T\;t \prec t\parallel{}t \prec t\fcmp{}t \prec \text{id}
%     % \varnothing \prec x \prec () \prec \text{inl}\;t \prec \text{inr}\;t \prec t_1\times{}t_2 \prec t_1\mapsto{}t_2 \prec \text{fold}\;t \prec \text{trace}\;t  \prec t_1+t_2
%   \end{align*}
%     \caption{式上の半順序関係}
%     \label{fig:order}
% \end{figure}

\newpage

% \section{諸々の性質}

% \begin{theo}[型付けの一意性]
% 与えられた型環境$Gamma$のもとで，任意の項$t$は，高々1つの型しかもたない．
% つまり，$t$が型付け可能ならばその型は一意である．
% \begin{equation*}
%   \sequent{\Gamma}{t:T} \;\land\; \sequent{\Gamma}{t:U} \;\implies\; T = U
% \end{equation*}
% \end{theo}

% \begin{lem}[合流性（Confluence）]
% \begin{equation*}
%   \reduction{e}{e_1} \;\land\; \reduction{e}{e_2} \;\implies\; \exists t'.(\reduction{t_1}{t'} \;\land\; \reduction{t_1}{t'})
% \end{equation*}
% \end{lem}

% \begin{theo}[簡約結果の一意性]
% \begin{equation*}
%   e\;\Rrightarrow\;e_1\;\not\Rrightarrow\; \;\land\; e\;\Rrightarrow\;e_2\;\not\Rrightarrow\; \;\implies\; e_1 = e_2
% \end{equation*}
% \end{theo}

% \begin{theo}[型保存定理（Type Preservation）]
% % 任意の項$t$について，与えられた型環境$Gamma$のもとで，型$T$で導出可能かつ，項$t'$にリダクション可能ならば，項$t'$は型環境$Gamma$と型$T$で型付け可能
% リダクションの前後で同じ型付け
% \begin{equation*}
%   \sequent{\Gamma}{t:T} \;\land\; \reduction{t}{t'} \;\implies\; \sequent{\Gamma}{t':T}
% \end{equation*}
% \end{theo}

% \begin{theo}[型進行定理（Type Progress）]
% 型付けされた項は値かさらにリダクション可能
% \begin{equation*}
%   \sequent{\Gamma}{t:T} \;\implies\; \text{$t$ is value} \;\lor\; \exists t'.\reduction{t}{t'}
% \end{equation*}
% \end{theo}

% \begin{prop}[Preservation]
%     $\sequent{\Gamma}{t:T} \quad\land\quad \reduction{t}{t'} \quad\implies\quad \sequent{\Gamma}{t':T}$
% \end{prop}

% \begin{prop}[Progress]
%     $\sequent{\Gamma}{t:T} \quad\implies\quad t\in\text{Value} \quad\lor\quad \exists{t'},\reduction{t}{t'}$
% \end{prop}

% 参考文献
\bibliography{reference}
\bibliographystyle{junsrt}

\end{document}
