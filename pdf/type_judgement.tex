\documentclass{jsarticle}

\pagestyle{empty}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{array}
\usepackage{ascmac}
\usepackage{bussproofs}
\usepackage{comment}
\usepackage{float}
\usepackage[left=0.5cm, top=0.5cm, right=0.5cm, bottom=0.5cm, nohead, dvipdfm]{geometry}
\usepackage[dvipdfmx]{graphicx}
\usepackage{latexsym}
\usepackage{oz}
\usepackage{tikz}
\usepackage{txfonts}
\usepackage{url}

\EnableBpAbbreviations
\newenvironment{bprooftree}
               {\leavevmode\hbox\bgroup}
               {\DisplayProof\egroup}

\newcommand{\bnfdef}{::=}
\newcommand{\sequent}[2]{#1 \;\vdash\; #2}
\newcommand{\nsequent}[3]{#1 \;\vdash\; #2 \;\triangleright\; #3}
% \newcommand{\infer}[5]{#1 \; \vdash \; #2 \; \triangleright \; #3 \; \mid_{#4} #5}
\newcommand{\infer}[5]{#1 \; \vdash \; #2 \; \triangleright \; #3 \; \mid \; #5}
% \newcommand{\semantics}[1]{{\llbracket #1 \rrbracket}}
\newcommand{\semantics}[1]{[\![ #1 ]\!]}
\newcommand{\judge}[2]{[\![ #1 \;\vdash\; #2 ]\!]}
\newcommand{\match}[3]{#1 \;\triangleright\; #2 \quad\rightharpoonup\quad #3}
\newcommand{\subst}[4]{#1 \;\triangleright\; #2 \quad\rightsquigarrow\quad #3 \;\triangleright\; #4}
\newcommand{\reduct}[2]{#1 &\;\Rrightarrow\; #2}
\newcommand{\reduction}[2]{#1 \;\Rrightarrow\; #2}


% https://tex.stackexchange.com/questions/417895/how-to-typeset-utimes-akin-to-uplus
\newcommand\utimes{\mathbin{\ooalign{$\cup$\cr%
   \hfil\raise0.42ex\hbox{$\scriptscriptstyle\times$}\hfil\cr}}}
\newcommand\bigutimes{\mathop{\ooalign{$\bigcup$\cr%
   \hfil\raise0.36ex\hbox{$\scriptscriptstyle\boldsymbol{\times}$}\hfil\cr}}}

\newcommand*{\vcenteredhbox}[1]{\begingroup
\setbox0=\hbox{#1}\parbox{\wd0}{\box0}\endgroup}


\begin{document}
\section{構文}
\begin{figure}[H]
  \begin{alignat*}{3}
    &\text{Type Variable} & \quad\ni & \quad X,Y,Z \quad         &              & \\
    &\text{Term Variable} & \quad\ni & \quad x,y,z \quad         &              & \\
    &\text{Type}          & \quad\ni & \quad S,T,U \quad         & \bnfdef\quad & X \mid \mathrm{I} \mid T\oplus{}T \mid T\otimes{}T \mid T\multimap{}T \mid \mu{X}.T \\
    &\text{Term}          & \ni      & \quad s,t,u \quad         & \bnfdef\quad & x \mid \text{()} \mid \text{inl}\;t \mid \text{inl}\;t \mid t\times{}t \mid t\mapsto{}t \mid \text{fold}_T\;t \mid \text{trace}_T\;t \mid t\parallel{}t \mid t\fcmp{}t \mid \varnothing \mid \text{id} \mid t^\dagger \\
    &\text{Expression}    & \ni      & \quad e,f,g \quad         & \bnfdef\quad & t \mid e\;\text{@}\;e \\
    &\text{Type Context}         & \quad\ni & \quad \Theta \quad & \bnfdef\quad & ~ \mid \Theta,X \\
    &\text{Term Context}         & \quad\ni & \quad \Gamma \quad & \bnfdef\quad & ~ \mid \Gamma,t:T \\
    &\text{Type Judgement}       & \quad\ni & \quad \sequent{\Theta}{T} \quad   & & \\
    &\text{Term Judgement}       & \quad\ni & \quad \sequent{\Gamma}{t:T} \quad & & \\
    &\text{Expression Judgement} & \quad\ni & \quad \sequent{~}{e:T} \quad & & \\
    &\text{Reduction}            & \quad\ni & \quad \reduction{t}{t} \quad & &
  \end{alignat*}
  \caption{Syntax}
  \label{fig:syntax}
\end{figure}

\section{型の構成}
\begin{figure}[H]
  \begin{align*}
    \begin{bprooftree}
      \AxiomC{$　$}
      \UnaryInfC{$\sequent{\Theta,X}{X}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \UnaryInfC{$\sequent{\Theta}{I}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Theta}{T_1}$}
      \AxiomC{$\sequent{\Theta}{T_2}$}
      \BinaryInfC{$\sequent{\Theta}{T_1\oplus{}T_2:}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Theta}{T_1}$}
      \AxiomC{$\sequent{\Theta}{T_2}$}
      \BinaryInfC{$\sequent{\Theta}{T_1\otimes{}T_2:}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Theta}{T_1}$}
      \AxiomC{$\sequent{\Theta}{T_2}$}
      \BinaryInfC{$\sequent{\Theta}{T_1\multimap{}T_2}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Theta,X}{T}$}
      \UnaryInfC{$\sequent{\Theta}{\mu{X}.T}$}
    \end{bprooftree}
  \end{align*}
  \caption{Formation rules}
  \label{fig:ty_form}
\end{figure}

\begin{figure}[H]
  \begin{alignat*}{2}
    [\;]&(X)                       \;&=\; &X \\
    [\sigma,X \rightarrow T]&(X)   \;&=\; &T \\
    [\sigma,X' \rightarrow S]&(X)  \;&=\; &X \\
    [\sigma]&(\mathrm{I})          \;&=\; &\mathrm{I} \\
    [\sigma]&(T_1\oplus{}T_2)      \;&=\; &[\sigma](T_1)\oplus{}[\sigma](T_2) \\
    [\sigma]&(T_1\otimes{}T_2)     \;&=\; &[\sigma](T_1)\otimes{}[\sigma](T_2) \\
    [\sigma]&(T_1\multimap{}T_2)   \;&=\; &[\sigma](T_1)\multimap{}[\sigma](T_2) \\
    [\sigma]&(\mu{X}.T)            \;&=\; &\mu{X}.[\sigma](T)
  \end{alignat*}
  \caption{Type Substitution}
  \label{fig:ty_sub}
\end{figure}

\newpage

\section{型検査}
\begin{figure}[H]
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$　$}
      \LeftLabel{Variable}
      \UnaryInfC{$\sequent{x:T}{x:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma_2,\Gamma_1}{t:T}$}
      \RightLabel{Exchange}
      \UnaryInfC{$\sequent{\Gamma_1,\Gamma_2}{t:T}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t:T}$}
      \LeftLabel{$I_L$}
      \UnaryInfC{$\sequent{\Gamma,\text{()}:I}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$I_R$}
      \UnaryInfC{$\sequent{}{\text{()}:I}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,t_1:T_1}{t:T}$}
      \LeftLabel{$\oplus_{L_l}$}
      \UnaryInfC{$\sequent{\Gamma,\text{inl}\;t_1:T_1\oplus{}T_2}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t_1:T_1}$}
      \RightLabel{$\oplus_{R_l}$}
      \UnaryInfC{$\sequent{\Gamma}{\text{inl}\;t_1:T_1\oplus{}T_2}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,t_2:T_2}{t:T}$}
      \LeftLabel{$\oplus_{L_r}$}
      \UnaryInfC{$\sequent{\Gamma,\text{inr}\;t_2:T_1\oplus{}T_2}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t_2:T_2}$}
      \RightLabel{$\oplus_{R_r}$}
      \UnaryInfC{$\sequent{\Gamma}{\text{inr}\;t_2:T_1\oplus{}T_2}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,t_1:T_1,t_2:T_2}{t:T}$}
      \LeftLabel{$\otimes_L$}
      \UnaryInfC{$\sequent{\Gamma,t_1\times{}t_2:T_1\otimes{}T_2}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma_1}{t_1:T_1}$}
      \AxiomC{$\sequent{\Gamma_2}{t_2:T_2}$}
      \RightLabel{$\otimes_R$}
      \BinaryInfC{$\sequent{\Gamma_1,\Gamma_2}{t_1\times{}t_2:T_1\otimes{}T_2}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma_1}{t_1:T_1}$}
      \AxiomC{$\sequent{\Gamma_2,t_2:T_2}{t:T}$}
      \LeftLabel{$\multimap_L$}
      \BinaryInfC{$\sequent{\Gamma_1,\Gamma_2,t_1\mapsto{}t_2:T_1\multimap{}T_2}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,t_1:T_1}{t_2:T_2}$}
      \RightLabel{$\multimap_R$}
      \UnaryInfC{$\sequent{\Gamma}{t_1\mapsto{}t_2:T_1\multimap{}T_2}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,u:[X \rightarrow \mu{X}.U]U}{t:T}$}
      \LeftLabel{$\mu_L$}
      \UnaryInfC{$\sequent{\Gamma,\text{fold}_{\mu{X}.U}\;u:\mu{X}.U}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t:[X \rightarrow \mu{X}.T]T}$}
      \RightLabel{$\mu_R$}
      \UnaryInfC{$\sequent{\Gamma}{\text{fold}_{\mu{X}.T}\;t:\mu{X}.T}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,u:S\oplus{}U_1\multimap{}S\oplus{}U_2}{t:T}$}
      \LeftLabel{$\text{Trace}_L$}
      \UnaryInfC{$\sequent{\Gamma,\text{trace}_S\;u:U_1\multimap{}U_2}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t:U\oplus{}T_1\multimap{}U\oplus{}T_2}$}
      \RightLabel{$\text{Trace}_R$}
      \UnaryInfC{$\sequent{\Gamma}{\text{trace}_U\;t:T_1\multimap{}T_2}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,t_1:U}{t:T}$}
      \AxiomC{$\sequent{\Gamma,t_2:U}{t:T}$}
      \LeftLabel{$\text{Par}_L$}
      \BinaryInfC{$\sequent{\Gamma,t_1\parallel{}t_2:U}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t_1:T}$}
      \AxiomC{$\sequent{\Gamma}{t_2:T}$}
      \RightLabel{$\text{Par}_R$}
      \BinaryInfC{$\sequent{\Gamma}{t_1\parallel{}t_2:T}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,t_1:T_1\multimap{}T_2,t_2:T_2\multimap{}T_3}{t:T}$}
      \LeftLabel{$\text{Seq}_L$}
      \UnaryInfC{$\sequent{\Gamma,t_1\fcmp{}t_2:T_1\multimap{}T_3}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma_1}{t_1:T_1\multimap{}T_2}$}
      \AxiomC{$\sequent{\Gamma_2}{t_2:T_2\multimap{}T_3}$}
      \RightLabel{$\text{Seq}_R$}
      \BinaryInfC{$\sequent{\Gamma_1,\Gamma_2}{t_1\fcmp{}t_2:T_1\multimap{}T_3}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma,u:T_2\multimap{}T_1}{t:T}$}
      \LeftLabel{$\dagger_L$}
      \UnaryInfC{$\sequent{\Gamma,u^\dagger:T_1\multimap{}T_2}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t:T_2\multimap{}T_1}$}
      \RightLabel{$\dagger_R$}
      \UnaryInfC{$\sequent{\Gamma}{t^\dagger:T_1\multimap{}T_2}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t:T}$}
      \LeftLabel{$\text{id}_L$}
      \UnaryInfC{$\sequent{\Gamma,\text{id}:U\multimap{}U}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$\text{id}_R$}
      \UnaryInfC{$\sequent{}{\text{id}:T\multimap{}T}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\sequent{\Gamma}{t:T}$}
      \LeftLabel{$\varnothing_\text{L}$}
      \UnaryInfC{$\sequent{\Gamma,\varnothing:U}{t:T}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$\varnothing_\text{R}$}
      \UnaryInfC{$\sequent{\Gamma}{\varnothing:T}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    % \begin{bprooftree}
    %   \AxiomC{$\sequent{\Gamma,u:U_1\multimap{}U_2,u_1:U_1}{t:T_1\multimap{}T_2}$}
    %   \LeftLabel{$\text{App}_L$}
    %   \UnaryInfC{$\sequent{\Gamma,u\;\text{@}\;u_1:U_2}{t:T}$}
    % \end{bprooftree}
    % \begin{bprooftree}
    %   \AxiomC{$\sequent{\Gamma_1}{t:T_1\multimap{}T_2}$}
    %   \AxiomC{$\sequent{\Gamma_2}{t_1:T_1}$}
    %   \RightLabel{$\text{App}_R$}
    %   \BinaryInfC{$\sequent{\Gamma_1,\Gamma_2}{t\;\text{@}\;t_1:T_2}$}
    % \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\sequent{}{f:T_1\multimap{}T_2}$}
      \AxiomC{$\sequent{}{e:T_1}$}
      \RightLabel{$\text{App}$}
      \BinaryInfC{$\sequent{}{f\;\text{@}\;e:T_2}$}
    \end{bprooftree}
  \end{center}
  \caption{Typing rules}
  \label{fig:ty_judge}
\end{figure}

\begin{figure}[H]
  \begin{center}
    $\nsequent{}{t:T}{}$
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\Gamma(x)=T$}
      \LeftLabel{Variable}
      \UnaryInfC{$\nsequent{\Gamma}{x:T}{\Gamma\setminus x}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t:T}{\Gamma'}$}
      \LeftLabel{$I_L$}
      \UnaryInfC{$\nsequent{\Gamma,\text{()}:I}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$I_R$}
      \UnaryInfC{$\nsequent{\Gamma}{\text{()}:I}{\Gamma}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,t_1:T_1}{t:T}{\Gamma'}$}
      \LeftLabel{$\oplus_{L_l}$}
      \UnaryInfC{$\nsequent{\Gamma,\text{inl}\;t_1:T_1\oplus{}T_2}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t_1:T_1}{\Gamma'}$}
      \RightLabel{$\oplus_{R_l}$}
      \UnaryInfC{$\nsequent{\Gamma}{\text{inl}\;t_1:T_1\oplus{}T_2}{\Gamma'}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,t_2:T_2}{t:T}{\Gamma'}$}
      \LeftLabel{$\oplus_{L_r}$}
      \UnaryInfC{$\nsequent{\Gamma,\text{inr}\;t_2:T_1\oplus{}T_2}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t_2:T_2}{\Gamma'}$}
      \RightLabel{$\oplus_{R_r}$}
      \UnaryInfC{$\nsequent{\Gamma}{\text{inr}\;t_2:T_1\oplus{}T_2}{\Gamma'}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,t_1:T_1,t_2:T_2}{t:T}{\Gamma'}$}
      \LeftLabel{$\otimes_L$}
      \UnaryInfC{$\nsequent{\Gamma,t_1\times{}t_2:T_1\otimes{}T_2}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t_1:T_1}{\Gamma'}$}
      \AxiomC{$\nsequent{\Gamma'}{t_2:T_2}{\Gamma''}$}
      \RightLabel{$\otimes_R$}
      \BinaryInfC{$\nsequent{\Gamma}{t_1\times{}t_2:T_1\otimes{}T_2}{\Gamma''}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t_1:T_1}{\Gamma'}$}
      \AxiomC{$\nsequent{\Gamma',t_2:T_2}{t:T}{\Gamma''}$}
      \LeftLabel{$\multimap_L$}
      \BinaryInfC{$\nsequent{\Gamma,t_1\mapsto{}t_2:T_1\multimap{}T_2}{t:T}{\Gamma''}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,t_1:T_1}{t_2:T_2}{\Gamma'}$}
      \RightLabel{$\multimap_R$}
      \UnaryInfC{$\nsequent{\Gamma}{t_1\mapsto{}t_2:T_1\multimap{}T_2}{\Gamma'}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,u:[X \rightarrow \mu{X}.U]U}{t:T}{\Gamma'}$}
      \LeftLabel{$\mu_L$}
      \UnaryInfC{$\nsequent{\Gamma,\text{fold}_{\mu{X}.U}\;u:\mu{X}.U}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t:[X \rightarrow \mu{X}.T]T}{\Gamma'}$}
      \RightLabel{$\mu_R$}
      \UnaryInfC{$\nsequent{\Gamma}{\text{fold}_{\mu{X}.T}\;t:\mu{X}.T}{\Gamma'}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,u:S\oplus{}U_1\multimap{}S\oplus{}U_2}{t:T}{\Gamma'}$}
      \LeftLabel{$\text{Trace}_L$}
      \UnaryInfC{$\nsequent{\Gamma,\text{trace}_S\;u:U_1\multimap{}U_2}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t:U\oplus{}T_1\multimap{}U\oplus{}T_2}{\Gamma'}$}
      \RightLabel{$\text{Trace}_R$}
      \UnaryInfC{$\nsequent{\Gamma}{\text{trace}_U\;t:T_1\multimap{}T_2}{\Gamma'}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,t_1:U}{t:T}{\Gamma'}$}
      \AxiomC{$\nsequent{\Gamma,t_2:U}{t:T}{\Gamma'}$}
      \LeftLabel{$\text{Par}_L$}
      \BinaryInfC{$\nsequent{\Gamma,t_1\parallel{}t_2:U}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t_1:T}{\Gamma'}$}
      \AxiomC{$\nsequent{\Gamma}{t_2:T}{\Gamma'}$}
      \RightLabel{$\text{Par}_R$}
      \BinaryInfC{$\nsequent{\Gamma}{t_1\parallel{}t_2:T}{\Gamma'}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,t_1:T_1\multimap{}T_2,t_2:T_2\multimap{}T_3}{t:T}{\Gamma'}$}
      \LeftLabel{$\text{Seq}_L$}
      \UnaryInfC{$\nsequent{\Gamma,t_1\fcmp{}t_2:T_1\multimap{}T_3}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t_1:T_1\multimap{}T_2}{\Gamma'}$}
      \AxiomC{$\nsequent{\Gamma'}{t_2:T_2\multimap{}T_3}{\Gamma''}$}
      \RightLabel{$\text{Seq}_R$}
      \BinaryInfC{$\nsequent{\Gamma}{t_1\fcmp{}t_2:T_1\multimap{}T_3}{\Gamma''}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma,u:T_2\multimap{}T_1}{t:T}{\Gamma'}$}
      \LeftLabel{$\dagger_L$}
      \UnaryInfC{$\nsequent{\Gamma,u^\dagger:T_1\multimap{}T_2}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t:T_2\multimap{}T_1}{\Gamma'}$}
      \RightLabel{$\dagger_R$}
      \UnaryInfC{$\nsequent{\Gamma}{t^\dagger:T_1\multimap{}T_2}{\Gamma'}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t:T}{\Gamma'}$}
      \LeftLabel{$\text{id}_L$}
      \UnaryInfC{$\nsequent{\Gamma,\text{id}:U\multimap{}U}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$\text{id}_R$}
      \UnaryInfC{$\nsequent{\Gamma}{\text{id}:T\multimap{}T}{\Gamma}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\nsequent{\Gamma}{t:T}{\Gamma'}$}
      \LeftLabel{$\varnothing_\text{L}$}
      \UnaryInfC{$\nsequent{\Gamma,\varnothing:U}{t:T}{\Gamma'}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$\varnothing_\text{R}$}
      \UnaryInfC{$\nsequent{\Gamma}{\varnothing:T}{\Gamma}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    % \begin{bprooftree}
    %   \AxiomC{$\nsequent{\Gamma,u:U_1\multimap{}U_2,u_1:U_1}{t:T}{\Gamma'}$}
    %   \LeftLabel{$\text{App}_L$}
    %   \UnaryInfC{$\nsequent{\Gamma,u\;\text{@}\;u_1:U_2}{t:T}{\Gamma'}$}
    % \end{bprooftree}
    % \begin{bprooftree}
    %   \AxiomC{$\nsequent{\Gamma}{t:T_1\multimap{}T_2}{\Gamma'}$}
    %   \AxiomC{$\nsequent{\Gamma'}{t_1:T_1}{\Gamma''}$}
    %   \RightLabel{$\text{App}_R$}
    %   \BinaryInfC{$\nsequent{\Gamma}{t\;\text{@}\;t_1:T_2}{\Gamma''}$}
    % \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\nsequent{}{f:T_1\multimap{}T_2}{}$}
      \AxiomC{$\nsequent{}{e:T_1}{}$}
      \RightLabel{$\text{App}$}
      \BinaryInfC{$\nsequent{}{f\;\text{@}\;e:T_2}{}$}
    \end{bprooftree}
  \end{center}
  \caption{Syntax--Directed Typing rules}
  \label{fig:sd_ty_judge}
\end{figure}

\newpage

\section{型推論}

\begin{figure}[H]
  \begin{align*}
    unify    &:= \text{Set of Constraint} \rightarrow \text{Substitution} \\
    unify(\{\})             &= [] \\
    unify(\{X = T\} \cup C) &= unify([X \rightarrow T]C) \circ [X \rightarrow T] \\
    unify(\{T = X\} \cup C) &= unify([X \rightarrow T]C) \circ [X \rightarrow T] \\
    unify(\{S_1 \oplus S_2 = T_1 \oplus T_2\} \cup C) &= unify(C \cup \{S_1 = T_1, S_2 = T_2\}) \\
    unify(\{S_1 \otimes S_2 = T_1 \otimes T_2\} \cup C) &= unify(C \cup \{S_1 = T_1, S_2 = T_2\}) \\
    unify(\{S_1 \multimap S_2 = T_1 \multimap T_2\} \cup C) &= unify(C \cup \{S_1 = T_1, S_2 = T_2\}) \\
    unify(\{\mu{X}.S = \mu{Y}.T\} \cup C) &= unify(C \cup \{X = Y, S = T\})
  \end{align*}
  \caption{単一化}
  \label{fig:unification}
\end{figure}

\begin{figure}[H]
  \begin{center}
    $\infer{}{t:X}{}{\chi}{C}$
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\Gamma(x)=V_2$}
      \LeftLabel{Variable}
      \UnaryInfC{$\infer{\Gamma}{x:V_1}{\Gamma\setminus (x:T)}{\{\}}{\{V_1=V_2\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$I_L$}
      \UnaryInfC{$\infer{\Gamma,\text{()}:V}{t:T}{\Gamma'}{\chi}{C\cup\{V=I\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$I_R$}
      \UnaryInfC{$\infer{\Gamma}{\text{()}:V}{\Gamma}{\{\}}{\{V=I\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,t_1:X_1}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\oplus_{L_l}$}
      \UnaryInfC{$\infer{\Gamma,\text{inl}\;t_1:V}{t:T}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\oplus{}X_2\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t_1:X_1}{\Gamma'}{\chi}{C}$}
      \RightLabel{$\oplus_{R_l}$}
      \UnaryInfC{$\infer{\Gamma}{\text{inl}\;t_1:V}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\oplus{}X_2\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,t_2:X_2}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\oplus_{L_r}$}
      \UnaryInfC{$\infer{\Gamma,\text{inr}\;t_2:V}{t:T}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\oplus{}X_2\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t_2:X_2}{\Gamma'}{\chi}{C}$}
      \RightLabel{$\oplus_{R_r}$}
      \UnaryInfC{$\infer{\Gamma}{\text{inr}\;t_2:V}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{X_1\oplus{}X_2\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,t_1:X_1,t_2:X_2}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\otimes_L$}
      \UnaryInfC{$\infer{\Gamma,t_1\times{}t_2:V}{t:T}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\otimes{}X_2\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t_1:X_1}{\Gamma'}{\chi_1}{C_1}$}
      \AxiomC{$\infer{\Gamma'}{t_2:X_2}{\Gamma''}{\chi_2}{C_2}$}
      \RightLabel{$\otimes_R$}
      \BinaryInfC{$\infer{\Gamma}{t_1\times{}t_2:V}{\Gamma''}{\chi_1\cup\chi_2\cup\{X_1,X_2\}}{C_1\cup{}C_2\cup\{V=X_1\otimes{}X_2\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t_1:X_1}{\Gamma'}{\chi_1}{C_1}$}
      \AxiomC{$\infer{\Gamma',t_2:X_2}{t:T}{\Gamma''}{\chi_2}{C_2}$}
      \LeftLabel{$\multimap_L$}
      \BinaryInfC{$\infer{\Gamma,t_1\mapsto{}t_2:V}{t:T}{\Gamma''}{\chi_1\cup\chi_2\cup\{X_1,X_2\}}{C_1\cup{}C_2\cup\{V=X_1\multimap{}X_2\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,t_1:X_1}{t_2:X_2}{\Gamma'}{\chi}{C}$}
      \RightLabel{$\multimap_R$}
      \UnaryInfC{$\infer{\Gamma}{t_1\mapsto{}t_2:V}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\multimap{}X_2\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,u:[Y \rightarrow \mu{Y}.U]U}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\mu_L$}
      \UnaryInfC{$\infer{\Gamma,\text{fold}_{\mu{Y}.U}\;u:V}{t:T}{\Gamma'}{\chi}{C\cup\{V=\mu{Y}.U\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t:[X \rightarrow \mu{X}.T]T}{\Gamma'}{\chi}{C}$}
      \RightLabel{$\mu_R$}
      \UnaryInfC{$\infer{\Gamma}{\text{fold}_{\mu{X}.T}\;t:V}{\Gamma'}{\chi}{C\cup\{V=\mu{X}.T\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,u:U\oplus{}X_1\multimap{}U\oplus{}X_2}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\text{Trace}_L$}
      \UnaryInfC{$\infer{\Gamma,\text{trace}_U\;u:V}{t:T}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\multimap{}X_2\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t:T\oplus{}X_1\multimap{}T\oplus{}X_2}{\Gamma'}{\chi}{C}$}
      \RightLabel{$\text{Trace}_R$}
      \UnaryInfC{$\infer{\Gamma}{\text{trace}_T\;t:V}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\multimap{}X_2\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,t_1:X}{t:T}{\Gamma'}{\chi_1}{C_1}$}
      \AxiomC{$\infer{\Gamma,t_2:X}{t:T}{\Gamma'}{\chi_2}{C_2}$}
      \LeftLabel{$\text{Par}_L$}
      \BinaryInfC{$\infer{\Gamma,t_1\parallel{}t_2:V}{t:T}{\Gamma'}{\chi_1\cup\chi_2\cup\{X\}}{C_1\cup{}C_2\cup\{V=X\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t_1:X}{\Gamma'}{\chi_1}{C_1}$}
      \AxiomC{$\infer{\Gamma}{t_2:X}{\Gamma'}{\chi_2}{C_2}$}
      \RightLabel{$\text{Par}_R$}
      \BinaryInfC{$\infer{\Gamma}{t_1\parallel{}t_2:V}{\Gamma'}{\chi_1\cup\chi_2\cup\{X\}}{C_1\cup{}C_2\cup\{V=X\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,t_1:X_1\multimap{}X_2,t_2:X_2\multimap{}X_3}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\text{Seq}_L$}
      \UnaryInfC{$\infer{\Gamma,t_1\fcmp{}t_2:V}{t:T}{\Gamma'}{\chi\cup\{X_1,X_2,X_3\}}{C\cup\{V=X_1\multimap{}X_3\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t_1:X_1\multimap{}X_2}{\Gamma'}{\chi_1}{C_1}$}
      \AxiomC{$\infer{\Gamma'}{t_2:X_2'\multimap{}X_3}{\Gamma''}{\chi_2}{C_2}$}
      \RightLabel{$\text{Seq}_R$}
      \BinaryInfC{$\infer{\Gamma}{t_1\fcmp{}t_2:V}{\Gamma''}{\chi_1\cup\chi_2\cup\{X_1,X_2,X_3\}}{C_1\cup{}C_2\cup\{V=X_1\multimap{}X_3\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma,u:X_2\multimap{}X_1}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\dagger_L$}
      \UnaryInfC{$\infer{\Gamma,u^\dagger:}{t:T}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\multimap{}X_2\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t:X_2\multimap{}X_1}{\Gamma'}{\chi}{C}$}
      \RightLabel{$\dagger_R$}
      \UnaryInfC{$\infer{\Gamma}{t^\dagger:V}{\Gamma'}{\chi\cup\{X_1,X_2\}}{C\cup\{V=X_1\multimap{}X_2\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\text{id}_L$}
      \UnaryInfC{$\infer{\Gamma,\text{id}:V}{t:T}{\Gamma'}{\chi\cup\{X\}}{C\cup\{V=X\multimap{}X\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$\text{id}_R$}
      \UnaryInfC{$\infer{\Gamma}{\text{id}:V}{\Gamma}{\{X\}}{\{V=X\multimap{}X\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\infer{\Gamma}{t:T}{\Gamma'}{\chi}{C}$}
      \LeftLabel{$\varnothing_\text{L}$}
      \UnaryInfC{$\infer{\Gamma,\varnothing:V}{t:T}{\Gamma'}{\chi\cup\{X\}}{C\{V=X\}}$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$　$}
      \RightLabel{$\varnothing_\text{R}$}
      \UnaryInfC{$\infer{\Gamma}{\varnothing:V}{\Gamma}{\{X\}}{\{V=X\}}$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    % \begin{bprooftree}
    %   \AxiomC{$\infer{\Gamma,u:X_1\multimap{}X_2,u_1:X_1}{t:T}{\Gamma'}{\chi}{C}$}
    %   \LeftLabel{$\text{App}_L$}
    %   \UnaryInfC{$\infer{\Gamma,u\;\text{@}\;u_1:V}{t:T}{\Gamma'}{\chi_1\cup\{X_1,X_2\}}{C\cup\{V=X_2\}}$}
    % \end{bprooftree}
    % \begin{bprooftree}
    %   \AxiomC{$\infer{\Gamma}{t:X_1\multimap{}X_2}{\Gamma'}{\chi_1}{C_1}$}
    %   \AxiomC{$\infer{\Gamma'}{t_1:X_1}{\Gamma''}{\chi_2}{C_2}$}
    %   \RightLabel{$\text{App}_R$}
    %   \BinaryInfC{$\infer{\Gamma}{t\;\text{@}\;t_1:V}{\Gamma''}{\chi_1\cup\chi_2\cup\{X_1,X_2\} }{C_1\cup{}C_2\cup\{V=X_2\}}$}
    % \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\infer{}{f:X_1\multimap{}X_2}{}{\chi_1}{C_1}$}
      \AxiomC{$\infer{}{e:X_1}{}{\chi_2}{C_2}$}
      \RightLabel{$\text{App}$}
      \BinaryInfC{$\infer{}{f\;\text{@}\;e:V}{}{\chi_1\cup\chi_2\cup\{X_1,X_2\} }{C_1\cup{}C_2\cup\{V=X_2\}}$}
    \end{bprooftree}
  \end{center}
  \caption{Type Inference rules}
  \label{fig:ty_infer}
\end{figure}

\newpage

\section{表示的意味論}

\begin{figure}[H]
  \begin{minipage}[b]{0.48\columnwidth}
    \begin{align*}
      \judge{\Theta}{T}                  &: \mathcal{V}^{|\Theta|} {\bf\rightarrow} \mathcal{V} \\
      \judge{\Theta}{X_i}                &:= \Pi_i \\
      \judge{\Theta}{\mathrm{I}}         &:= K_I \\
      \judge{\Theta}{T_1\oplus{}T_2}     &:= \oplus\circ\langle\judge{\Theta}{T_1},\judge{\Theta}{T_2}\rangle \\
      \judge{\Theta}{T_1\otimes{}T_2}    &:= \otimes\circ\langle\judge{\Theta}{T_1},\judge{\Theta}{T_2}\rangle \\
      \judge{\Theta}{T_1\multimap{}T_2}  &:= \otimes\circ\langle\judge{\Theta}{T_1}^\star,\judge{\Theta}{T_2}\rangle \\
      \judge{\Theta}{\mu{X}.T}           &:= \judge{\Theta,X}{T}^\sharp \\
      \judge{\Theta}{T[X \rightarrow U]} &:= \judge{\Theta}{T}\circ\langle{Id,\judge{\Theta}{U}}\rangle \\
      \semantics{T}                      &:= \judge{}{T}(\ast) \in Obj(\mathcal{V})
      %（ただしここで$\ast$は，スモール圏の圏$\mathbf{Cat}$における終対象$\mathbf{1}$の唯一の対象）
    \end{align*}
    \caption{Type Interpretation}
    \label{fig:ty_interpret}
  \end{minipage}
  \begin{minipage}[b]{0.48\columnwidth}
    \begin{align*}
      \semantics{\Gamma} &\in Obj(\mathcal{V}) \\
      \semantics{} &:= I \\
      \semantics{\Gamma,\text{()}:\mathrm{I}} &:= \semantics{\Gamma} \\
      \semantics{\Gamma,\text{inl}\;t_1:T_1\oplus{}T_2} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\oplus\semantics{T_2}) \\
      \semantics{\Gamma,\text{inr}\;t_2:T_1\oplus{}T_2} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\oplus\semantics{T_2}) \\
      \semantics{\Gamma,t_1\times{}t_2:T_1\otimes{}T_2} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\otimes\semantics{T_2}) \\
      \semantics{\Gamma,t_1\mapsto{}t_2:T_1\multimap{}T_2} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\multimap\semantics{T_2}) \\
      \semantics{\Gamma,\text{fold}_{\mu{X}.T}\;u:\mu{X}.T} &:= \semantics{\Gamma}\otimes\semantics{\mu{X}.T} \\
      \semantics{\Gamma,\text{trace}_T\;t:T_1\multimap{}T_2} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\multimap\semantics{T_2}) \\
      \semantics{\Gamma,t_1\parallel{}t_2:T} &:= \semantics{\Gamma}\otimes\semantics{T} \\
      \semantics{\Gamma,t_1\fcmp{}t_2:T_1\multimap{}T_3} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\multimap\semantics{T_3}) \\
      \semantics{\Gamma,t^\dagger:T_1\multimap{}T_2} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\multimap\semantics{T_2}) \\
      \semantics{\Gamma,\text{id}:T\multimap{}T} &:= \semantics{\Gamma} \\
      \semantics{\Gamma,\varnothing:T} &:= \semantics{\Gamma} \\
      \semantics{f\;\text{@}\;e:T} &:= \semantics{\Gamma}\otimes\semantics{T}
    \end{align*}
    \caption{Context Interpretation}
    \label{fig:cxt_interpret}
  \end{minipage}
\end{figure}

\begin{figure}[H]
  \begin{align*}
    \semantics{\Gamma \vdash t:T}  &: \semantics{\Gamma} \rightarrow \semantics{T} \\
    % variable
    \judge{x:T}{x:T}               &:= \semantics{T} \xrightarrow{id_{\semantics{T}}} \semantics{T} \\
    % exchange
    \judge{\Gamma_1,\Gamma_2}{t:T} &:= \semantics{\Gamma_1}\otimes\semantics{\Gamma_2}
    \xrightarrow{\sigma_{\semantics{\Gamma_1},\semantics{\Gamma_2}}} \semantics{\Gamma_2}\otimes\semantics{\Gamma_1} \xrightarrow{\judge{\Gamma_2,\Gamma_1}{t:T}} \semantics{T} \\
    % unit_l
    \judge{\Gamma,():\mathrm{I}}{t:T}       &:= \semantics{\Gamma}\otimes{}I \xrightarrow{\rho_{\semantics{\Gamma}}} \semantics{\Gamma} \xrightarrow{\judge{\Gamma}{t:T}} \semantics{T} \\
    % unit_r
    \judge{}{():\mathrm{I}}                 &:= \semantics{} \xrightarrow{id_I} \semantics{\mathrm{I}} \\
    % inl_l
    \judge{\Gamma,\text{inl}\;t_1:T_1\oplus{}T_2}{t:T} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\oplus\semantics{T_2}) \xrightarrow{id_{\semantics{\Gamma}}\otimes\pi_1} \semantics{\Gamma}\otimes{}\semantics{T_1} \xrightarrow{\judge{\Gamma,t_1:T_1}{t:T}} \semantics{T} \\
    % inl_r
    \judge{\Gamma}{\text{inl}\;t_1:T_1\oplus{}T_2}     &:= \semantics{\Gamma} \xrightarrow{\judge{\Gamma}{t_1:T_1}} \semantics{T_1} \xrightarrow{\iota_1} \semantics{T_1}\oplus\semantics{T_2} \\
    % inr_l
    \judge{\Gamma,\text{inr}\;t_2:T_1\oplus{}T_2}{t:T} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\oplus\semantics{T_2}) \xrightarrow{id_{\semantics{\Gamma}}\otimes\pi_2} \semantics{\Gamma}\otimes{}\semantics{T_2} \xrightarrow{\judge{\Gamma,t_2:T_2}{t:T}} \semantics{T} \\
    % inr_r
    \judge{\Gamma}{\text{inr}\;t_1:T_1\oplus{}T_2}     &:= \semantics{\Gamma} \xrightarrow{\judge{\Gamma}{t_2:T_2}} \semantics{T_2} \xrightarrow{\iota_2} \semantics{T_1}\oplus\semantics{T_2} \\
    % tensor_l
    \judge{\Gamma,t_1\times{}t_2:T_1\otimes{}T_2}{t:T} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\otimes\semantics{T_2}) \xrightarrow{\judge{\Gamma,t_1:T_1,t_2:T_2}{t:T}} \semantics{T} \\
    % tensor_r
    \judge{\Gamma_1,\Gamma_2}{t_1\times{}t_2:T_1\otimes{}T_2} &:= \semantics{\Gamma_1}\otimes\semantics{\Gamma_2} \xrightarrow{\judge{\Gamma_1}{t_1:T_1}\otimes\judge{\Gamma_1}{t_2:T_2}} \semantics{T_1}\otimes\semantics{T_2} \\
    % function_l
    \judge{\Gamma_1,\Gamma_2,t_1\mapsto{}t_2:T_1\multimap{}T_2}{t:T} &:=
    \left(\semantics{\Gamma_1}\otimes\semantics{\Gamma_2}\otimes(\semantics{T_1}\multimap\semantics{T_2}) \cong \semantics{\Gamma_1}\otimes(\semantics{\Gamma_2}\otimes\semantics{T_2})\otimes\semantics{T_1}^\star \rightarrow \semantics{T}\right) \\
    &\cong \left(\semantics{\Gamma_1}\otimes(\semantics{\Gamma_2}\otimes\semantics{T_2}) \xrightarrow{\judge{\Gamma_1}{t_1:T_1}\otimes\judge{\Gamma_2,t_2:T_2}{t:T}} \semantics{T_1}\otimes\semantics{T}\right) \\
    % function_r
    \judge{\Gamma}{t_1\mapsto{}t_2:T_1\multimap{}T_2} &:= \semantics{\Gamma} \rightarrow \semantics{T_1}\multimap\semantics{T_2} \cong \left(\semantics{\Gamma}\otimes\semantics{T_1} \xrightarrow{\judge{\Gamma,t_1:T_1}{t_2:T_2}} \semantics{T_2}\right) \\
    % fold_l
    \judge{\Gamma,\text{fold}_{\mu{X}.U}\;u:\mu{X}.U}{t:T} &:= \semantics{\Gamma}\otimes\semantics{\mu{X}.U} \xrightarrow{id_{\semantics{\Gamma}}\otimes{}unfold_{\mu{X}.U}} \semantics{\Gamma}\otimes\semantics{[X \rightarrow \mu{X}.U](U)} \\
    &\quad \xrightarrow{\judge{\Gamma,u:[X \rightarrow \mu{X}.U](U)}{t:T}} \semantics{T} \\
    % fold_r
    \judge{\Gamma}{\text{fold}_{\mu{X}.T}\;t:\mu{X}.T} &:= \semantics{\Gamma} \xrightarrow{\judge{\Gamma}{t:[X \rightarrow \mu{X}.T](T)}} \semantics{[X \rightarrow \mu{X}.T](T)} \xrightarrow{fold_{\mu{X}.T}} \semantics{\mu{X}.T} \\
    % trace_l
    \judge{\Gamma,\text{trace}_U\;u:T_1\multimap{}T_2}{t:T} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\multimap\semantics{T_2}) \xrightarrow{id_{\semantics{\Gamma}}\otimes{}Tr_{\semantics{T_1},\semantics{T_2}}^{\semantics{U}}\left(\judge{\Gamma,t:(U\oplus{}T_1)\multimap(U\oplus{}T_2)}{t:T}\right)} \semantics{T} \\
    % trace_r
    \judge{\Gamma}{\text{trace}_U\;t:T_1\multimap{}T_2} &:= \semantics{\Gamma} \xrightarrow{Tr_{\semantics{T_1},\semantics{T_2}}^{\semantics{U}}\left(\judge{\Gamma}{t:U\oplus{}T_1\multimap{}U\oplus{}T_2}\right)} \semantics{T_1}\multimap\semantics{T_2} \\
    % parallel_l
    \judge{\Gamma,t_1\parallel{}t_2:U}{t:T} &:= \semantics{\Gamma}\otimes{}\semantics{U} \xrightarrow{id_{\semantics{\Gamma}}\otimes(\judge{\Gamma,t_1:U}{t:T}+\judge{\Gamma,t_2:U}{t:T})} \semantics{T} \\
    % parallel_r
    \judge{\Gamma}{t_1\parallel{}t_2:T} &:= \semantics{\Gamma} \xrightarrow{\judge{\Gamma}{t_1:T}+\judge{\Gamma}{t_2:T}} \semantics{T} \\
    % sequence_l
    \judge{\Gamma,t_1\fcmp{}t_2:T_1\multimap{}T_3}{t:T} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\multimap\semantics{T_3}) \\
    &\quad \xrightarrow{id_{\Gamma}\otimes{}decomp_{\semantics{T_1},\semantics{T_2},\semantics{T_3}}} \semantics{\Gamma}\otimes\left((\semantics{T_1}\multimap\semantics{T_2})\otimes(\semantics{T_2}\multimap\semantics{T_3})\right) \\
    &\quad \xrightarrow{\judge{\Gamma,t_1:T_1\multimap{}T_2,t_2:T_2\multimap{}T_3}{t:T}} \semantics{T} \\
    % sequence_r
    \judge{\Gamma_1,\Gamma_2}{t_1\fcmp{}t_2:T_1\multimap{}T_3} &:= \semantics{\Gamma_1}\otimes\semantics{\Gamma_2} \xrightarrow{\judge{\Gamma_1}{t_1:T_1\multimap{}T_2}\otimes\judge{\Gamma_2}{t_2:T_2\multimap{}T_3}} (\semantics{T_1}\multimap\semantics{T_2})\otimes(\semantics{T_2}\multimap\semantics{T_3}) \\
    &\quad \xrightarrow{comp_{\semantics{T_1},\semantics{T_2},\semantics{T_3}}} \semantics{T_1}\multimap\semantics{T_3} \\
    % dagger_l
    \judge{\Gamma,u^\dagger:T_1\multimap{}T_2}{t:T} &:= \semantics{\Gamma}\otimes(\semantics{T_1}\multimap\semantics{T_2}) \xrightarrow{id_{\semantics{\Gamma}}\otimes{}dagger_{\semantics{T_1},\semantics{T_2}}} \semantics{\Gamma}\otimes(\semantics{T_2}\multimap\semantics{T_1}) \xrightarrow{\judge{\Gamma,u:T_2\multimap{}T_1}{t:T}} \semantics{T} \\
    % dagger_r
    \judge{\Gamma}{t^\dagger:T_1\multimap{}T_2} &:= \semantics{\Gamma} \xrightarrow{\judge{\Gamma}{t:T_2\multimap{}T_1}} \semantics{T_2}\multimap\semantics{T_1} \xrightarrow{dagger_{\semantics{T_1},\semantics{T_2}}} \semantics{T_1}\multimap\semantics{T_2} \\
    % identity_l
    \judge{\Gamma,\text{id}:U\multimap{}U}{t:T} &:= \semantics{\Gamma} \xrightarrow{\judge{\Gamma}{t:T}} \semantics{T} \\
    % identity_r
    \judge{}{\text{id}:T\multimap{}T} &:= \semantics{} \rightarrow \semantics{T}\multimap\semantics{T} \cong \left(\semantics{T} \xrightarrow{id_{\semantics{T}}} \semantics{T}\right) \\
    % zero_l
    \judge{\Gamma,\varnothing:U}{t:T} &:= \semantics{\Gamma} \xrightarrow{\judge{\Gamma}{t:T}} \semantics{T} \\
    % zero_r
    \judge{\Gamma}{\varnothing:T} &:= \semantics{\Gamma} \xrightarrow{0_{\semantics{\Gamma},\semantics{T}}} \semantics{T} \\
    % application
    \judge{}{t\;\text{@}\;t_1:T_2} &:= \semantics{} \xrightarrow{\judge{}{t:T_1\multimap{}T_2}\otimes\judge{}{t_1:T_1}} (\semantics{T_1}\multimap\semantics{T_2})\otimes\semantics{T_1} \xrightarrow{eval_{\semantics{T_1},\semantics{T_2}}} \semantics{T_2}
  \end{align*}
  \caption{Term Interpretation}
  \label{fig:tm_interpret}
\end{figure}

% \begin{itembox}[c]{Type Interpretation}
% $|\Theta|$はコンテキスト$\Theta$に含まれる型変数の数 \\
% 圏$\bf{V}$はトレース双積付きダガーコンパクト圏(Dagger Compact Category with Traced Finite Biproduct)
% \begin{itemize}
%   \item $F: {\bf V}^n \rightarrow {\bf V}$は$n$多重関手
%   \item $\Pi_i:{\bf V}^{|\Theta|} \rightarrow {\bf V}$は射影関手
%   \item $K_I:{\bf V}^{|\Theta|} \rightarrow {\bf V}$は定数$I$関手
%   \item $\otimes:{\bf V} \times {\bf V} \rightarrow {\bf V}$はテンソル積関手
%   \item $\oplus:{\bf V} \times {\bf V} \rightarrow {\bf V}$は双積関手
%   \item $(-)^\star:{\bf V}^{op} \rightarrow {\bf V}$は充満忠実自己反変関手
%   \item $[-,-]:{\bf V}^{op} \times {\bf V} \rightarrow {\bf V}$は内部ホム関手
%   \item $Id_{\bf V}$は恒等関手
%   \item 圏$\bf{V}$と関手$F:{\bf V}^n \rightarrow {\bf V}\quad(n \ge 1)$について，パラメトライズされた$F$の始代数は，以下を満たす組$(F^\sharp, \phi^F)$
%     \begin{itemize}
%       \item $F^\sharp:{\bf V}^{n-1} \rightarrow {\bf V}$は関手
%       \item $\phi^F:F\circ\langle{Id,F^\sharp}\rangle \Rightarrow F^\sharp:{\bf V}^{n-1} \rightarrow {\bf V}$は自然同型
%       \item 全ての$T\in|{\bf V}^{n-1}|$について，組$(F^\sharp(T),\phi^F_T)$は$F(T,-)\mathchar`-$始代数
%     \end{itemize}
% \end{itemize}
%   \begin{align*}
%     \semantics{\Theta \vdash T}                  &: {\bf V}^{|\Theta|} {\bf\rightarrow} {\bf V} \\
%     \semantics{\Theta \vdash X_i}                &= \Pi_i \\
%     \semantics{\Theta \vdash I}                  &= K_I \\
%     \semantics{\Theta \vdash T_1\oplus{}T_2}     &= \oplus\circ\langle\semantics{\Theta \vdash T_1},\semantics{\Theta \vdash T_2}\rangle \\
%     \semantics{\Theta \vdash T_1\otimes{}T_2}    &= \otimes\circ\langle\semantics{\Theta \vdash T_1},\semantics{\Theta \vdash T_2}\rangle \\
%     \semantics{\Theta \vdash T_1\multimap{}T_2}  &= \otimes\circ\langle\semantics{\Theta \vdash T_1}^\star,\semantics{\Theta \vdash T_2}\rangle \\
%     \semantics{\Theta \vdash \mu{X}.T}           &= \semantics{\Theta,X \vdash T}^\sharp \\
%     \semantics{\Theta \vdash T[X \rightarrow U]} &= \semantics{\Theta \vdash T}\circ\langle{Id,\semantics{\Theta \vdash U}}\rangle \\
%     \semantics{T}                                &:= \semantics{\; \vdash T}(\ast) \in |{\bf V}|
%   \end{align*}
%   $\ast$は，スモール圏の圏$\mathbf{Cat}$における終対象$\mathbf{1}$の唯一の対象
% \end{itembox}

% \begin{itembox}[c]{Denotational Semantics}
% $Hom_{\bf V}(A,B)$ is morphism which Domain and Codomain are $A\in|{\bf V}|$ and $B\in |{\bf V}|$, respectively. \\
% $id_T$ is identity morphism of $T \in|{\bf V}|$. \\
% $0_{A,B}$ is zero morphism of $Hom_{\bf V}(A,B)$. \\
% $\iota_i$ is injection morphism. \\
% $\pi_i$ is projection morphism. \\
% $\pi_i = \iota_i^{-1}$ \\
% $\pi_i\circ\iota_j = id$ if $i = j$ \\
% $\pi_i\circ\iota_j = 0$ otherwise \\
% $unfold_{\mu{X}.T} = fold^{-1}_{\mu{X}.T}$ \\
% $f \circ (g \oplus h) = (f \circ g) \oplus (f \circ h)$ \\
% $(f \oplus g) \circ h = (f \circ h) \oplus (g \circ h)$ \\
% $id_A \otimes id_B = id_{A \otimes B}$ \\
% $(f \otimes g) \circ (h \otimes k) = (f \circ h) \otimes (g \circ k)$ \\
% $f^{\star\star} = f$ \\
% ${(f \otimes g)}^\star = f^\star \otimes g^\star$ \\
% $\Delta_T : T \rightarrow T\oplus{}T$ satisfying $\pi_i\circ\Delta_T = id_T$ \\
% $\nabla_T : T\oplus{}T \rightarrow T$ satisfying $\iota_i\circ\nabla_T = id_T $ \\
% $f+g = \Delta_T \circ (f\oplus{}g) \circ \nabla_U$ \\
% % $S : {\bf V}(T,T)$ is additive antipode \\
% $Tr_U^{X,Y}(f) : {\bf V}(X,Y)$ which $f : {\bf V}(U\oplus{}X, U\oplus{}Y)$ 
%   \begin{align*}
%     \semantics{t:T}                                 &\in \semantics{T} \\
%     \semantics{\text{id}:T}                         &= 1 \\
%     \semantics{\varnothing:T}                       &= 0 \\ % undefined
%     \semantics{x:T}                                 &= x \\
%     \semantics{\text{()}:I}                         &= \ast \\
%     \semantics{\text{inl}\;t_1:T_1\oplus{}T_2}      &= \iota_1(\semantics{t_1:T_1}) \\
%     \semantics{\text{inr}\;t_2:T_1\oplus{}T_2}      &= \iota_2(\semantics{t_2:T_2}) \\
%     \semantics{t_1\times{}t_2:T_1\otimes{}T_2}      &= \semantics{t_1:T_1}\otimes\semantics{t_2:T_2} \\
%     \semantics{t_1\mapsto{}t_2:T_1\multimap{}T_2}   &= \semantics{t_1:T_1}^\star\otimes\semantics{t_2:T_2} \\
%     \semantics{\text{fold}\;t:\mu{X}.T}             &= fold_{\mu{X}.T}(\semantics{t:T[X/\mu{X}.T]}) \\
%     \semantics{t_1+t_2:T}                           &= \tfrac{1}{\sqrt{2}}(\semantics{t_1:T}+\semantics{t_2:T}) \\
%     \semantics{t_1\fcmp{}t_2:T_1\multimap{}T_3}     &= \semantics{t_2:T_2\multimap{}T_3}\circ\semantics{t_1:T_1\multimap{}T_2} \\
%     \semantics{\text{trace}_U\;t:T_1\multimap{}T_2} &= Tr_{T_1,T_2}^U(\semantics{t:(U\oplus{}T_1)\multimap(U\oplus{}T_2)}) \\
%     \semantics{t^\dagger:T_1\multimap{}T_2}         &= \semantics{t:T_2\multimap{}T_1}^{-1} \\
%     \semantics{t\;\text{@}\;t_1:T_2}                &= \semantics{t:T_1\multimap{}T_2}(\semantics{t_1:T_1}) \\
%   \end{align*}
% \end{itembox}

\newpage

\section{操作的意味論}

\begin{figure}[H]
  \begin{equation*}
    \sigma_1\cup^+_\bot\sigma_2 :=
    \begin{cases}
      \bot                 &\text{if}\;\sigma_1=\bot\vee\sigma_2=\bot \\
      \sigma_1\cup\sigma_2 &\text{otherwise}
    \end{cases}
  \end{equation*}
  \begin{equation*}
    \sigma_1\cup^\times_\bot\sigma_2 :=
    \begin{cases}
      \bot                 &\text{if}\;\sigma_1=\bot\wedge\sigma_2=\bot \\
      \sigma_1             &\text{if}\;\sigma_2=\bot \\
      \sigma_2             &\text{if}\;\sigma_1=\bot \\
      \sigma_1\cup\sigma_2 &\text{otherwise}
    \end{cases}
  \end{equation*}
  \caption{Operations on Environment $\sigma$}
  \label{fig:op_env}
\end{figure}

\begin{figure}[H]
  \begin{minipage}[b]{0.48\hsize}
    \begin{alignat*}{2}
      x                 &\triangleright t                 \;&:=\; &[x \rightarrow t] \\
      ()                &\triangleright ()                \;&:=\; &[\;] \\
      \text{inl}\;t     &\triangleright \text{inl}\;u     \;&:=\; &t \triangleright u \\
      \text{inl}\;t     &\triangleright \text{inr}\;u     \;&:=\; &\bot \\
      \text{inr}\;t     &\triangleright \text{inr}\;u     \;&:=\; &t \triangleright u \\
      \text{inr}\;t     &\triangleright \text{inl}\;u     \;&:=\; &\bot \\
      t_1\times{}t_2    &\triangleright u_1\times{}u_2    \;&:=\; &(t_1 \triangleright u_1)\cup^\times_\bot(t_2 \triangleright u_2) \\
      t_1\mapsto{}t_2   &\triangleright u_1\mapsto{}u_2   \;&:=\; &(t_1 \triangleright u_1)\cup^\times_\bot(t_2 \triangleright u_2) \\
      \text{fold}_T\;t  &\triangleright \text{fold}_T\;u  \;&:=\; &t \triangleright u \\
      \text{trace}_T\;t &\triangleright \text{trace}_T\;u \;&:=\; &t \triangleright u \\
      t                 &\triangleright u_1\parallel{}u_2 \;&:=\; &(t \triangleright u_1)\cup^+_\bot(t \triangleright u_2) \\
      t_1\parallel{}t_2 &\triangleright u                 \;&:=\; &(t_1 \triangleright u)\cup^+_\bot(t_2 \triangleright u) \\
      t_1\fcmp{}t_2     &\triangleright u_1\fcmp{}u_2     \;&:=\; &(t_1 \triangleright u_1)\cup^\times_\bot(t_2 \triangleright u_2) \\
      t\fcmp{}x         &\triangleright u                 \;&:=\; &x \triangleright t^\dagger\fcmp{}u \\
      x\fcmp{}t         &\triangleright u                 \;&:=\; &x \triangleright u\fcmp{}t^\dagger \\
      t^\dagger         &\triangleright u                 \;&:=\; &t \triangleright u^\dagger \\
      \text{id}         &\triangleright \text{id}         \;&:=\; &[\;] \\
      \varnothing       &\triangleright u                 \;&:=\; &\bot \\
      t                 &\triangleright \varnothing       \;&:=\; &\bot
    \end{alignat*}
    \caption{Constructing Environment}
    \label{fig:tm_mcth}
  \end{minipage}
  \begin{minipage}[b]{0.48\hsize}
    \begin{alignat*}{2}
      [\;]&(x)                                  \;&:=\; &\varnothing \\
      [\sigma,x\rightarrow t]&(x)               \;&:=\; &t \\
      [\sigma,x'\rightarrow t]&(x)              \;&:=\; &\varnothing \\
      [\sigma]&(())                             \;&:=\; &() \\
      [\sigma]&(\text{inl}\;t)                  \;&:=\; &\text{inl}\;[\sigma](t) \\
      [\sigma]&(\text{inr}\;t)                  \;&:=\; &\text{inr}\;[\sigma](t) \\
      [\sigma_1,\sigma_2]&(t_1\times{}t_2)      \;&:=\; &[\sigma](t_1)\times[\sigma](t_2) \\
      [\sigma_1,\sigma_2]&(t_1\mapsto{}t_2)     \;&:=\; &[\sigma](t_1)\mapsto[\sigma](t_2) \\
      [\sigma]&(\text{fold}_T\;t)    \;&:=\; &\text{fold}_T\;[\sigma](t) \\
      [\sigma]&(\text{trace}_T\;t)   \;&:=\; &\text{trace}_T\;[\sigma](t) \\
      [\sigma_1,\sigma_2]&(t_1\parallel{}t_2)   \;&:=\; &[\sigma](t_1)\parallel[\sigma](t_2) \\
      [\sigma]&(t_1\fcmp{}t_2)       \;&:=\; &[\sigma](t_1)\fcmp[\sigma](t_2) \\
      [\sigma]&(t^\dagger)           \;&:=\; &[\sigma](t)^\dagger \\
      [\sigma]&(\text{id})           \;&:=\; &\text{id} \\
      [\;]&(\varnothing)             \;&:=\; &\varnothing \\
      [\bot]&(t)                     \;&:=\; &\varnothing
    \end{alignat*}
    \caption{Consumption of Environment}
    \label{fig:tm_sbst}
  \end{minipage}
\end{figure}

\begin{figure}[H]
  \begin{align*}
    \reduct{\varnothing\parallel{}t}{t} &
    \reduct{\varnothing^\dagger}{\varnothing} \\
    \reduct{(t_1\parallel{}t_2)\parallel{}t_3}{t_1\parallel(t_2\parallel{}t_3)} &
    \reduct{\text{id}^\dagger}{\text{id}} \\
    \reduct{t_1\parallel{}t_2}{t_2\parallel{}t_1} &
    \reduct{()^\dagger}{()} \\
    \reduct{t\parallel{}t}{t} &
    \reduct{(t_1\parallel{}t_2)^\dagger}{t_1^\dagger\parallel{}t_2^\dagger} \\
    \reduct{\text{id}\fcmp{}t}{t} &
    \reduct{(t_1\fcmp{}t_2)^\dagger}{t_1^\dagger\fcmp{}t_2^\dagger} \\
    \reduct{t\fcmp\text{id}}{t} &
    \reduct{(\text{inl}\;t)^\dagger}{\text{inl}\;t^\dagger} \\
    \reduct{(t_1\fcmp{}t_2)\fcmp{}t_3}{t_1\fcmp(t_2\fcmp{}t_3)} &
    \reduct{(\text{inr}\;t)^\dagger}{\text{inr}\;t^\dagger} \\
    \reduct{\varnothing\fcmp{}t}{\varnothing} &
    \reduct{(t_1\times{}t_2)^\dagger}{t_1^\dagger\times{}t_2^\dagger} \\
    \reduct{t\fcmp\varnothing}{\varnothing} &
    \reduct{(t_1\mapsto{}t_2)^\dagger}{t_1^\dagger\mapsto{}t_2^\dagger} \\
    \reduct{(t_1\parallel{}t_2)\fcmp{}t_3}{(t_1\fcmp{}t_3)\parallel(t_2\fcmp{}t_3)} &
    \reduct{(\text{fold}_T\;t)^\dagger}{\text{fold}_T\;t^\dagger} \\
    \reduct{t_1\fcmp(t_2\parallel{}t_3)}{(t_1\fcmp{}t_2)\parallel(t_1\fcmp{}t_3)} &
    \reduct{(\text{trace}_T\;t)^\dagger}{\text{trace}_T\;t^\dagger} \\
    && \reduct{(t^\dagger)^\dagger}{t} \\
    \reduct{\text{inl}\;\varnothing}{\varnothing} &
    \reduct{\text{inl}\;(t_1\parallel{}t_2)}{\text{inl}\;t_1\parallel\text{inl}\;t_2} \\
    \reduct{\text{inr}\;\varnothing}{\varnothing} &
    \reduct{\text{inr}\;(t_1\parallel{}t_2)}{\text{inr}\;t_1\parallel\text{inr}\;t_2} \\
    \reduct{\varnothing\times{}t}{\varnothing} &
    \reduct{(t_1\parallel{}t_2)\times{}t_3}{(t_1\times{}t_3)\parallel(t_2\times{}t_3)} \\
    \reduct{t\times\varnothing}{\varnothing} &
    \reduct{t_1\times(t_2\parallel{}t_3)}{(t_1\times{}t_2)\parallel(t_1\times{}t_3)} \\
    \reduct{\varnothing\mapsto{}t}{\varnothing} &
    \reduct{(t_1\parallel{}t_2)\mapsto{}t_3}{(t_1\mapsto{}t_3)\parallel(t_2\mapsto{}t_3)} \\
    \reduct{t\mapsto\varnothing}{\varnothing} &
    \reduct{t_1\mapsto(t_2\parallel{}t_3)}{(t_1\mapsto{}t_2)\parallel(t_1\mapsto{}t_3)} \\
    \reduct{\text{fold}_T\;\varnothing}{\varnothing} &
    \reduct{\text{fold}_T\;(t_1\parallel{}t_2)}{\text{fold}_T\;t_1\parallel\text{fold}_T\;t_2} \\
    \reduct{\text{trace}_T\;\varnothing}{\varnothing}
  \end{align*}
  \begin{align*}
    \reduction{t_1}{t_1'} \;\;\Longrightarrow\;\; \reduction{t_2}{t_2'} &\;\;\Longrightarrow\;\; \reduction{t_1\parallel{}t_2}{t_1'\parallel{}t_2'} \\
    \reduction{t_1}{t_1'} \;\;\Longrightarrow\;\; \reduction{t_2}{t_2'} &\;\;\Longrightarrow\;\; \reduction{t_1\fcmp{}t_2}{t_1'\fcmp{}t_2'} \\
    \reduction{t}{t'} &\;\;\Longrightarrow\;\; \reduction{\text{inl}\;t}{\text{inl}\;t'} \\
    \reduction{t}{t'} &\;\;\Longrightarrow\;\; \reduction{\text{inr}\;t}{\text{inr}\;t'} \\
    \reduction{t_1}{t_1'} \;\;\Longrightarrow\;\; \reduction{t_2}{t_2'} &\;\;\Longrightarrow\;\; \reduction{t_1\times{}t_2}{t_1'\times{}t_2'} \\
    \reduction{t_1}{t_1'} \;\;\Longrightarrow\;\; \reduction{t_2}{t_2'} &\;\;\Longrightarrow\;\; \reduction{t_1\mapsto{}t_2}{t_1'\mapsto{}t_2'} \\
    \reduction{t}{t'} &\;\;\Longrightarrow\;\; \reduction{\text{fold}_T\;t}{\text{fold}_T\;t'} \\
    \reduction{t}{t'} &\;\;\Longrightarrow\;\; \reduction{\text{trace}_T\;t}{\text{trace}_T\;t'} \\
    \reduction{t_1}{t_1'} \;\;\Longrightarrow\;\; \reduction{t_2}{t_2'} &\;\;\Longrightarrow\;\; \reduction{t_1\;\text{@}\;t_2}{t_1'\;\text{@}\;t_2'}
  \end{align*}
  \begin{align*}
    \reduct{(t_1\mapsto{}t_2)\;\text{@}\;t}{(t_1\triangleright{}t)\;t_2} \\
    \reduct{\varnothing\;\text{@}\;t}{\varnothing} &
    \reduct{(t_1\parallel{}t_2)\;\text{@}\;t}{(t_1\;\text{@}\;t)\parallel(t_2\;\text{@}\;t)} \\
    \reduct{t\;\text{@}\;\varnothing}{\varnothing} &
    \reduct{t\;\text{@}\;(t_1\parallel{}t_2)}{(t\;\text{@}\;t_1)\parallel(t\;\text{@}\;t_2)} \\
    \reduct{\text{id}\;\text{@}\;t}{t} &
    \reduct{t_1\fcmp{}t_2\;\text{@}\;t}{t_2\;\text{@}\;(t_1\;\text{@}\;t)}
  \end{align*}
  \begin{align*}
    \reduction{t\;\text{@}\;(\text{inr}\;u)}{\text{inr}\;u'} &\;\;\Longrightarrow\;\; \reduction{(\text{trace}_T\;t)\;\text{@}\;u}{u'} \\
    \reduction{t\;\text{@}\;(\text{inr}\;u)}{\text{inl}\;u'} \;\;\Longrightarrow\;\; \reduction{(\text{trace}_T\;t)\;\text{@}\;(\text{inl}\;u')}{u''} &\;\;\Longrightarrow\;\; \reduction{(\text{trace}_T\;t)\;\text{@}\;u}{u''} \\
    \reduction{t\;\text{@}\;(\text{inl}\;u)}{\text{inl}\;u'} \;\;\Longrightarrow\;\; \reduction{(\text{trace}_T\;t)\;\text{@}\;(\text{inl}\;u')}{u''} &\;\;\Longrightarrow\;\; \reduction{(\text{trace}_T\;t)\;\text{@}\;u}{u''} \\
    \reduction{t\;\text{@}\;(\text{inl}\;u)}{\text{inr}\;u'} &\;\;\Longrightarrow\;\; \reduction{(\text{trace}_T\;t)\;\text{@}\;(\text{inl}\;u)}{u'}
  \end{align*}
  \caption{Reduction}
  \label{fig:reduction}
\end{figure}

% \begin{figure}[H]
%     % $ x \prec () \prec \text{inl}\;t \prec \text{inr}\;t \prec t_1\times{}t_2 \prec t_1\mapsto{}t_2 \prec \text{fold}\;t \prec t\;\text{trace}_T \prec t_1+t_2 \prec -t $
%     % $ \varnothing \prec x \prec () \prec \text{inl}\;t \prec \text{inr}\;t \prec t_1\times{}t_2 \prec t_1\mapsto{}t_2 \prec \text{fold}\;t \prec t\;\text{trace}_T \prec \forall(X:\kappa).t \prec t_1+t_2 $
%     $ \varnothing \prec x \prec () \prec \text{inl}\;t \prec \text{inr}\;t \prec t_1\times{}t_2 \prec t_1\mapsto{}t_2 \prec \text{fold}\;t \prec \text{trace}\;t  \prec t_1+t_2 $
%     \caption{代表値}
%     \label{fig:order}
% \end{figure}

\end{document}
