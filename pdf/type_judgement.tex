\documentclass[10pt]{jsarticle}

\pagestyle{empty}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{array}
\usepackage{ascmac}
\usepackage{bussproofs}
\usepackage{comment}
\usepackage[left=0.5cm, top=0.5cm, right=0.5cm, bottom=0.5cm, nohead, dvipdfm]{geometry}
\usepackage[dvipdfmx]{graphicx}
\usepackage{latexsym}
\usepackage{oz}
%\usepackage{syntax}
\usepackage{tikz}
\usepackage{txfonts}

\EnableBpAbbreviations
\newenvironment{bprooftree}
               {\leavevmode\hbox\bgroup}
               {\DisplayProof\egroup}

\usetikzlibrary{decorations.markings, shapes}
\tikzset{middlearrow/.style n args={3}{
    decoration={
      markings,
      mark=at position 0.5 with {\arrow{#1}, \node[#2]{#3};},
    },
    postaction={decorate}
  }
}

\newcommand*{\vcenteredhbox}[1]{\begingroup
\setbox0=\hbox{#1}\parbox{\wd0}{\box0}\endgroup}


\begin{document}
\begin{itembox}[c]{Formation rules for Types}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{}
      %\RightLabel{$var$}
      \UnaryInfC{$X \vdash X$}
    \end{bprooftree}
    \begin{bprooftree}
    \AxiomC{}
      %\RightLabel{$I$}
      \UnaryInfC{$\Gamma \vdash I$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\Gamma \vdash T_1$}
      \AxiomC{$\Gamma \vdash T_2$}
      %\RightLabel{$\otimes$}
      \BinaryInfC{$\Gamma \vdash T_1\oplus{}T_2$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\Gamma \vdash T_1$}
      \AxiomC{$\Gamma \vdash T_2$}
      %\RightLabel{$\oplus$}
      \BinaryInfC{$\Gamma \vdash T_1\otimes{}T_2$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\Gamma \vdash T$}
      %\RightLabel{$\star$}
      \UnaryInfC{$\Gamma \vdash T^\star$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$X \vdash T$}
      %\RightLabel{$\mu$}
      \UnaryInfC{$\Gamma \vdash \mu{X}.T$}
    \end{bprooftree}
  \end{center}
\end{itembox}

\begin{itembox}[c]{Formation rules for Values}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{}
      %\RightLabel{$\ast$}
      \UnaryInfC{$\vdash e^{i\theta}:I$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\vdash v_1:T_1$}
      \AxiomC{$\vdash v_2:T_2$}
      %\RightLabel{$\times$}
      \BinaryInfC{$\vdash v_1\times{}v_2:T_1\otimes{}T_2$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\vdash v:T_1$}
      %\RightLabel{$inl$}
      \UnaryInfC{$\vdash inl\;v:T_1\oplus{}T_2$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\vdash v:T_2$}
      %\RightLabel{$\inr$}
      \UnaryInfC{$\vdash inr\;v:T_1\oplus{}T_2$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\vdash v:T$}
      %\RightLabel{$\star$}
      \UnaryInfC{$\vdash \overline{v}:T^\star$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\vdash v:T[\mu{X}.T/X]$}
      %\RightLabel{$fold$}
      \UnaryInfC{$\vdash fold\;v:\mu{X}.T$}
    \end{bprooftree}
  \end{center}
  \begin{center}
    \begin{bprooftree}
      \AxiomC{$\vdash v_1:T_1\otimes{}T_2$}
      \AxiomC{$\vdash v_2:T_1\otimes{}T_2$}
      %\RightLabel{$+$}
      \BinaryInfC{$\vdash v_1+v_2:T_1\otimes{}T_2$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\vdash v_1:T^\star$}
      \AxiomC{$\vdash v_2:T$}
      %\RightLabel{$,$}
      \BinaryInfC{$\vdash v_1,v_2:T^\star\otimes{}T$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\vdash v_1:T_1$}
      \AxiomC{$\vdash v_2:T_1^\star\otimes{}T_2$}
      %\RightLabel{$Application$}
      \BinaryInfC{$\vdash v_1\;v_2:T_2$}
    \end{bprooftree}
    \begin{bprooftree}
      \AxiomC{$\vdash v_1:T_1^\star\otimes{}T_2$}
      \AxiomC{$\vdash v_2:T_2^\star\otimes{}T_3$}
      %\RightLabel{$\fcmp$}
      \BinaryInfC{$\vdash v_1\fcmp{}v_2:T_1^\star\otimes{}T_3$}
    \end{bprooftree}
  \end{center}
\end{itembox}

\begin{itembox}[c]{Typing rules for Terms}
    \begin{prooftree}
      \AxiomC{$x:T \in \Gamma$}
      \UnaryInfC{$\Gamma \vdash x:T$}
    \end{prooftree}

    \begin{prooftree}
      \AxiomC{$\vdash v:T$}
      \UnaryInfC{$\Gamma \vdash measure\;v:T$}
    \end{prooftree}
    
    \begin{prooftree}
      \AxiomC{$\Gamma \vdash t:T_1\oplus{}T_2$}
      \AxiomC{$\Gamma,x:T_1 \vdash u_1:T $}
      \AxiomC{$\Gamma,y:T_2 \vdash u_2:T $}
      \TrinaryInfC{$\Gamma \vdash case\;t\;of\;inl\;x\;to\;u_1\;inr\;y\;to\;u_2:T$}
    \end{prooftree}

    \begin{prooftree}
      \AxiomC{$\Gamma \vdash t:T_1\otimes{}T_2 $}
      \UnaryInfC{$\Gamma \vdash fst\;t:T_1 $}
    \end{prooftree}

    \begin{prooftree}
      \AxiomC{$\Gamma \vdash t:T_1\otimes{}T_2 $}
      \UnaryInfC{$\Gamma \vdash fst\;t:T_2 $}
    \end{prooftree}

    \begin{prooftree}
      \AxiomC{$\Gamma \vdash t:T $}
      \AxiomC{$\Gamma,x:T \vdash u:U $}
      \BinaryInfC{$\Gamma \vdash let\;x\;be\;t\;in\;u:U$}
    \end{prooftree}

    \begin{prooftree}
      \AxiomC{$\Gamma,x:T \vdash t:T $}
      \AxiomC{$\Gamma,x:T \vdash u:U$}
      \BinaryInfC{$\Gamma \vdash rec\;x\;be\;t\;in\;u:U$}
    \end{prooftree}
\end{itembox}

\begin{itembox}[c]{Substitution}
  \begin{align*}
    Y[S/X] &=
    \begin{cases}
      S & \text{if}X = Y \\
      Y & \text{otherwise}
    \end{cases} \\
    I[S/X] &= I \\
    T_1\otimes{}T_2[S/X] &= T_1[S/X]\otimes{}T_2[S/X] \\
    T_1\oplus{}T_2[S/X] &= T_1[S/X]\oplus{}T_2[S/X] \\
    T^\star[S/X] &= T[S/X]^\star \\
    \mu{Y}.T[S/X] &= \mu{Y}.(T[S/X])
    %再帰型の入れ子は型付けで許さないのでここの定義は修正した方がいい鴨
  \end{align*}
\end{itembox}

\end{document}
